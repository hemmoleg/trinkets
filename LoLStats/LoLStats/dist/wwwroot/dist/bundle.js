!function (t) { var e = {}; function n(o) { if (e[o])
    return e[o].exports; var r = e[o] = { i: o, l: !1, exports: {} }; return t[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports; } n.m = t, n.c = e, n.d = function (t, e, o) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: o }); }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }); }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e)
    return t; if (4 & e && "object" == typeof t && t && t.__esModule)
    return t; var o = Object.create(null); if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t)
    for (var r in t)
        n.d(o, r, function (e) { return t[e]; }.bind(null, r)); return o; }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default; } : function () { return t; }; return n.d(e, "a", e), e; }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e); }, n.p = "/wwwwroot/dist/", n(n.s = 0); }({ 0: function (t, e, n) {
        "use strict";
        n.r(e);
        n(5);
        /*! *****************************************************************************
        Copyright (c) Microsoft Corporation. All rights reserved.
        Licensed under the Apache License, Version 2.0 (the "License"); you may not use
        this file except in compliance with the License. You may obtain a copy of the
        License at http://www.apache.org/licenses/LICENSE-2.0
        
        THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
        WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
        MERCHANTABLITY OR NON-INFRINGEMENT.
        
        See the Apache Version 2.0 License for specific language governing permissions
        and limitations under the License.
        ***************************************************************************** */ var o = function (t, e) { return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e; } || function (t, e) { for (var n in e)
            e.hasOwnProperty(n) && (t[n] = e[n]); })(t, e); };
        function r(t, e) { function n() { this.constructor = t; } o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n); }
        var s = function () { return (s = Object.assign || function (t) { for (var e, n = 1, o = arguments.length; n < o; n++)
            for (var r in e = arguments[n])
                Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t; }).apply(this, arguments); };
        function i(t, e, n, o) { return new (n || (n = Promise))(function (r, s) { function i(t) { try {
            c(o.next(t));
        }
        catch (t) {
            s(t);
        } } function a(t) { try {
            c(o.throw(t));
        }
        catch (t) {
            s(t);
        } } function c(t) { t.done ? r(t.value) : new n(function (e) { e(t.value); }).then(i, a); } c((o = o.apply(t, e || [])).next()); }); }
        function a(t, e) { var n, o, r, s, i = { label: 0, sent: function () { if (1 & r[0])
                throw r[1]; return r[1]; }, trys: [], ops: [] }; return s = { next: a(0), throw: a(1), return: a(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this; }), s; function a(s) { return function (a) { return function (s) { if (n)
            throw new TypeError("Generator is already executing."); for (; i;)
            try {
                if (n = 1, o && (r = 2 & s[0] ? o.return : s[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, s[1])).done)
                    return r;
                switch (o = 0, r && (s = [2 & s[0], r.value]), s[0]) {
                    case 0:
                    case 1:
                        r = s;
                        break;
                    case 4: return i.label++, { value: s[1], done: !1 };
                    case 5:
                        i.label++, o = s[1], s = [0];
                        continue;
                    case 7:
                        s = i.ops.pop(), i.trys.pop();
                        continue;
                    default:
                        if (!(r = (r = i.trys).length > 0 && r[r.length - 1]) && (6 === s[0] || 2 === s[0])) {
                            i = 0;
                            continue;
                        }
                        if (3 === s[0] && (!r || s[1] > r[0] && s[1] < r[3])) {
                            i.label = s[1];
                            break;
                        }
                        if (6 === s[0] && i.label < r[1]) {
                            i.label = r[1], r = s;
                            break;
                        }
                        if (r && i.label < r[2]) {
                            i.label = r[2], i.ops.push(s);
                            break;
                        }
                        r[2] && i.ops.pop(), i.trys.pop();
                        continue;
                }
                s = e.call(t, i);
            }
            catch (t) {
                s = [6, t], o = 0;
            }
            finally {
                n = r = 0;
            } if (5 & s[0])
            throw s[1]; return { value: s[0] ? s[1] : void 0, done: !0 }; }([s, a]); }; } }
        var c, l = function (t) { function e(e, n) { var o = this, r = this.constructor.prototype; return (o = t.call(this, e) || this).statusCode = n, o.__proto__ = r, o; } return r(e, t), e; }(Error), u = function (t) { function e(e) { var n = this.constructor; void 0 === e && (e = "A timeout occurred."); var o = this, r = n.prototype; return (o = t.call(this, e) || this).__proto__ = r, o; } return r(e, t), e; }(Error);
        !function (t) { t[t.Trace = 0] = "Trace", t[t.Debug = 1] = "Debug", t[t.Information = 2] = "Information", t[t.Warning = 3] = "Warning", t[t.Error = 4] = "Error", t[t.Critical = 5] = "Critical", t[t.None = 6] = "None"; }(c || (c = {}));
        var h, p = function () { return function (t, e, n) { this.statusCode = t, this.statusText = e, this.content = n; }; }(), g = function (t) { function e(e) { var n = t.call(this) || this; return n.logger = e, n; } return r(e, t), e.prototype.send = function (t) { var e = this; return new Promise(function (n, o) { var r = new XMLHttpRequest; r.open(t.method, t.url, !0), r.withCredentials = !0, r.setRequestHeader("X-Requested-With", "XMLHttpRequest"), t.headers && Object.keys(t.headers).forEach(function (e) { return r.setRequestHeader(e, t.headers[e]); }), t.responseType && (r.responseType = t.responseType), t.abortSignal && (t.abortSignal.onabort = function () { r.abort(); }), t.timeout && (r.timeout = t.timeout), r.onload = function () { t.abortSignal && (t.abortSignal.onabort = null), r.status >= 200 && r.status < 300 ? n(new p(r.status, r.statusText, r.response || r.responseText)) : o(new l(r.statusText, r.status)); }, r.onerror = function () { e.logger.log(c.Warning, "Error from HTTP request. " + r.status + ": " + r.statusText), o(new l(r.statusText, r.status)); }, r.ontimeout = function () { e.logger.log(c.Warning, "Timeout from HTTP request."), o(new u); }, r.send(t.content || ""); }); }, e; }(function () { function t() { } return t.prototype.get = function (t, e) { return this.send(s({}, e, { method: "GET", url: t })); }, t.prototype.post = function (t, e) { return this.send(s({}, e, { method: "POST", url: t })); }, t.prototype.delete = function (t, e) { return this.send(s({}, e, { method: "DELETE", url: t })); }, t; }()), d = function () { function t() { } return t.write = function (e) { return "" + e + t.RecordSeparator; }, t.parse = function (e) { if (e[e.length - 1] !== t.RecordSeparator)
            throw new Error("Message is incomplete."); var n = e.split(t.RecordSeparator); return n.pop(), n; }, t.RecordSeparatorCode = 30, t.RecordSeparator = String.fromCharCode(t.RecordSeparatorCode), t; }(), f = function () { function t() { } return t.prototype.writeHandshakeRequest = function (t) { return d.write(JSON.stringify(t)); }, t.prototype.parseHandshakeResponse = function (t) { var e, n; if (t instanceof ArrayBuffer) {
            var o = new Uint8Array(t);
            if (-1 === (s = o.indexOf(d.RecordSeparatorCode)))
                throw new Error("Message is incomplete.");
            var r = s + 1;
            e = String.fromCharCode.apply(null, o.slice(0, r)), n = o.byteLength > r ? o.slice(r).buffer : null;
        }
        else {
            var s, i = t;
            if (-1 === (s = i.indexOf(d.RecordSeparator)))
                throw new Error("Message is incomplete.");
            r = s + 1;
            e = i.substring(0, r), n = i.length > r ? i.substring(r) : null;
        } var a = d.parse(e); return [n, JSON.parse(a[0])]; }, t; }();
        !function (t) { t[t.Invocation = 1] = "Invocation", t[t.StreamItem = 2] = "StreamItem", t[t.Completion = 3] = "Completion", t[t.StreamInvocation = 4] = "StreamInvocation", t[t.CancelInvocation = 5] = "CancelInvocation", t[t.Ping = 6] = "Ping", t[t.Close = 7] = "Close"; }(h || (h = {}));
        var v = function () { function t() { } return t.prototype.log = function (t, e) { }, t.instance = new t, t; }(), m = function () { function t() { } return t.isRequired = function (t, e) { if (null === t || void 0 === t)
            throw new Error("The '" + e + "' argument is required."); }, t.isIn = function (t, e, n) { if (!(t in e))
            throw new Error("Unknown " + n + " value: " + t + "."); }, t; }();
        function y(t, e) { var n = null; return t instanceof ArrayBuffer ? (n = "Binary data of length " + t.byteLength, e && (n += ". Content: '" + function (t) { var e = ""; return new Uint8Array(t).forEach(function (t) { e += "0x" + (t < 16 ? "0" : "") + t.toString(16) + " "; }), e.substr(0, e.length - 1); }(t) + "'")) : "string" == typeof t && (n = "String data of length " + t.length, e && (n += ". Content: '" + t + "'.")), n; }
        function b(t, e, n, o, r, s, l) { return i(this, void 0, void 0, function () { var i, u, h, p; return a(this, function (a) { switch (a.label) {
            case 0: return [4, r()];
            case 1: return (u = a.sent()) && ((p = {}).Authorization = "Bearer " + u, i = p), t.log(c.Trace, "(" + e + " transport) sending data. " + y(s, l) + "."), [4, n.post(o, { content: s, headers: i })];
            case 2: return h = a.sent(), t.log(c.Trace, "(" + e + " transport) request complete. Response status: " + h.statusCode + "."), [2];
        } }); }); }
        var w, S, C = function () { function t(t) { this.observers = [], this.cancelCallback = t; } return t.prototype.next = function (t) { for (var e = 0, n = this.observers; e < n.length; e++) {
            n[e].next(t);
        } }, t.prototype.error = function (t) { for (var e = 0, n = this.observers; e < n.length; e++) {
            var o = n[e];
            o.error && o.error(t);
        } }, t.prototype.complete = function () { for (var t = 0, e = this.observers; t < e.length; t++) {
            var n = e[t];
            n.complete && n.complete();
        } }, t.prototype.subscribe = function (t) { return this.observers.push(t), new T(this, t); }, t; }(), T = function () { function t(t, e) { this.subject = t, this.observer = e; } return t.prototype.dispose = function () { var t = this.subject.observers.indexOf(this.observer); t > -1 && this.subject.observers.splice(t, 1), 0 === this.subject.observers.length && this.subject.cancelCallback().catch(function (t) { }); }, t; }(), k = function () { function t(t) { this.minimumLogLevel = t; } return t.prototype.log = function (t, e) { if (t >= this.minimumLogLevel)
            switch (t) {
                case c.Critical:
                case c.Error:
                    console.error(c[t] + ": " + e);
                    break;
                case c.Warning:
                    console.warn(c[t] + ": " + e);
                    break;
                case c.Information:
                    console.info(c[t] + ": " + e);
                    break;
                default: console.log(c[t] + ": " + e);
            } }, t; }(), E = 3e4, I = function () { function t(t, e, n) { var o = this; m.isRequired(t, "connection"), m.isRequired(e, "logger"), m.isRequired(n, "protocol"), this.serverTimeoutInMilliseconds = E, this.logger = e, this.protocol = n, this.connection = t, this.handshakeProtocol = new f, this.connection.onreceive = function (t) { return o.processIncomingData(t); }, this.connection.onclose = function (t) { return o.connectionClosed(t); }, this.callbacks = {}, this.methods = {}, this.closedCallbacks = [], this.id = 0; } return t.create = function (e, n, o) { return new t(e, n, o); }, t.prototype.start = function () { return i(this, void 0, void 0, function () { var t; return a(this, function (e) { switch (e.label) {
            case 0: return t = { protocol: this.protocol.name, version: this.protocol.version }, this.logger.log(c.Debug, "Starting HubConnection."), this.receivedHandshakeResponse = !1, [4, this.connection.start(this.protocol.transferFormat)];
            case 1: return e.sent(), this.logger.log(c.Debug, "Sending handshake request."), [4, this.connection.send(this.handshakeProtocol.writeHandshakeRequest(t))];
            case 2: return e.sent(), this.logger.log(c.Information, "Using HubProtocol '" + this.protocol.name + "'."), this.cleanupTimeout(), this.configureTimeout(), [2];
        } }); }); }, t.prototype.stop = function () { return this.logger.log(c.Debug, "Stopping HubConnection."), this.cleanupTimeout(), this.connection.stop(); }, t.prototype.stream = function (t) { for (var e = this, n = [], o = 1; o < arguments.length; o++)
            n[o - 1] = arguments[o]; var r = this.createStreamInvocation(t, n), s = new C(function () { var t = e.createCancelInvocation(r.invocationId), n = e.protocol.writeMessage(t); return delete e.callbacks[r.invocationId], e.connection.send(n); }); this.callbacks[r.invocationId] = function (t, e) { e ? s.error(e) : t.type === h.Completion ? t.error ? s.error(new Error(t.error)) : s.complete() : s.next(t.item); }; var i = this.protocol.writeMessage(r); return this.connection.send(i).catch(function (t) { s.error(t), delete e.callbacks[r.invocationId]; }), s; }, t.prototype.send = function (t) { for (var e = [], n = 1; n < arguments.length; n++)
            e[n - 1] = arguments[n]; var o = this.createInvocation(t, e, !0), r = this.protocol.writeMessage(o); return this.connection.send(r); }, t.prototype.invoke = function (t) { for (var e = this, n = [], o = 1; o < arguments.length; o++)
            n[o - 1] = arguments[o]; var r = this.createInvocation(t, n, !1); return new Promise(function (t, n) { e.callbacks[r.invocationId] = function (e, o) { if (o)
            n(o);
        else if (e.type === h.Completion) {
            var r = e;
            r.error ? n(new Error(r.error)) : t(r.result);
        }
        else
            n(new Error("Unexpected message type: " + e.type)); }; var o = e.protocol.writeMessage(r); e.connection.send(o).catch(function (t) { n(t), delete e.callbacks[r.invocationId]; }); }); }, t.prototype.on = function (t, e) { t && e && (t = t.toLowerCase(), this.methods[t] || (this.methods[t] = []), -1 === this.methods[t].indexOf(e) && this.methods[t].push(e)); }, t.prototype.off = function (t, e) { if (t) {
            t = t.toLowerCase();
            var n = this.methods[t];
            if (n)
                if (e) {
                    var o = n.indexOf(e);
                    -1 !== o && (n.splice(o, 1), 0 === n.length && delete this.methods[t]);
                }
                else
                    delete this.methods[t];
        } }, t.prototype.onclose = function (t) { t && this.closedCallbacks.push(t); }, t.prototype.processIncomingData = function (t) { if (this.cleanupTimeout(), this.receivedHandshakeResponse || (t = this.processHandshakeResponse(t), this.receivedHandshakeResponse = !0), t)
            for (var e = 0, n = this.protocol.parseMessages(t, this.logger); e < n.length; e++) {
                var o = n[e];
                switch (o.type) {
                    case h.Invocation:
                        this.invokeClientMethod(o);
                        break;
                    case h.StreamItem:
                    case h.Completion:
                        var r = this.callbacks[o.invocationId];
                        null != r && (o.type === h.Completion && delete this.callbacks[o.invocationId], r(o));
                        break;
                    case h.Ping: break;
                    case h.Close:
                        this.logger.log(c.Information, "Close message received from server."), this.connection.stop(o.error ? new Error("Server returned an error on close: " + o.error) : null);
                        break;
                    default: this.logger.log(c.Warning, "Invalid message type: " + o.type);
                }
            } this.configureTimeout(); }, t.prototype.processHandshakeResponse = function (t) { var e, n, o; try {
            n = (o = this.handshakeProtocol.parseHandshakeResponse(t))[0], e = o[1];
        }
        catch (t) {
            var r = "Error parsing handshake response: " + t;
            this.logger.log(c.Error, r);
            var s = new Error(r);
            throw this.connection.stop(s), s;
        } if (e.error) {
            r = "Server returned handshake error: " + e.error;
            this.logger.log(c.Error, r), this.connection.stop(new Error(r));
        }
        else
            this.logger.log(c.Debug, "Server handshake complete."); return n; }, t.prototype.configureTimeout = function () { var t = this; this.connection.features && this.connection.features.inherentKeepAlive || (this.timeoutHandle = setTimeout(function () { return t.serverTimeout(); }, this.serverTimeoutInMilliseconds)); }, t.prototype.serverTimeout = function () { this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server.")); }, t.prototype.invokeClientMethod = function (t) { var e = this, n = this.methods[t.target.toLowerCase()]; if (n) {
            if (n.forEach(function (n) { return n.apply(e, t.arguments); }), t.invocationId) {
                var o = "Server requested a response, which is not supported in this version of the client.";
                this.logger.log(c.Error, o), this.connection.stop(new Error(o));
            }
        }
        else
            this.logger.log(c.Warning, "No client method with the name '" + t.target + "' found."); }, t.prototype.connectionClosed = function (t) { var e = this, n = this.callbacks; this.callbacks = {}, Object.keys(n).forEach(function (e) { (0, n[e])(void 0, t || new Error("Invocation canceled due to connection being closed.")); }), this.cleanupTimeout(), this.closedCallbacks.forEach(function (n) { return n.apply(e, [t]); }); }, t.prototype.cleanupTimeout = function () { this.timeoutHandle && clearTimeout(this.timeoutHandle); }, t.prototype.createInvocation = function (t, e, n) { if (n)
            return { arguments: e, target: t, type: h.Invocation }; var o = this.id; return this.id++, { arguments: e, invocationId: o.toString(), target: t, type: h.Invocation }; }, t.prototype.createStreamInvocation = function (t, e) { var n = this.id; return this.id++, { arguments: e, invocationId: n.toString(), target: t, type: h.StreamInvocation }; }, t.prototype.createCancelInvocation = function (t) { return { invocationId: t, type: h.CancelInvocation }; }, t; }();
        !function (t) { t[t.None = 0] = "None", t[t.WebSockets = 1] = "WebSockets", t[t.ServerSentEvents = 2] = "ServerSentEvents", t[t.LongPolling = 4] = "LongPolling"; }(w || (w = {})), function (t) { t[t.Text = 1] = "Text", t[t.Binary = 2] = "Binary"; }(S || (S = {}));
        var x = function () { function t() { this.isAborted = !1; } return t.prototype.abort = function () { this.isAborted || (this.isAborted = !0, this.onabort && this.onabort()); }, Object.defineProperty(t.prototype, "signal", { get: function () { return this; }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "aborted", { get: function () { return this.isAborted; }, enumerable: !0, configurable: !0 }), t; }(), P = 5e3, M = function () { function t(t, e, n, o, r) { this.httpClient = t, this.accessTokenFactory = e || function () { return null; }, this.logger = n, this.pollAbort = new x, this.logMessageContent = o, this.shutdownTimeout = r || P; } return Object.defineProperty(t.prototype, "pollAborted", { get: function () { return this.pollAbort.aborted; }, enumerable: !0, configurable: !0 }), t.prototype.connect = function (t, e) { return i(this, void 0, void 0, function () { var n, o, r, s, i; return a(this, function (a) { switch (a.label) {
            case 0:
                if (m.isRequired(t, "url"), m.isRequired(e, "transferFormat"), m.isIn(e, S, "transferFormat"), this.url = t, this.logger.log(c.Trace, "(LongPolling transport) Connecting"), e === S.Binary && "string" != typeof (new XMLHttpRequest).responseType)
                    throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");
                return n = { abortSignal: this.pollAbort.signal, headers: {}, timeout: 9e4 }, e === S.Binary && (n.responseType = "arraybuffer"), [4, this.accessTokenFactory()];
            case 1: return o = a.sent(), this.updateHeaderToken(n, o), s = t + "&_=" + Date.now(), this.logger.log(c.Trace, "(LongPolling transport) polling: " + s), [4, this.httpClient.get(s, n)];
            case 2: return 200 !== (i = a.sent()).statusCode ? (this.logger.log(c.Error, "(LongPolling transport) Unexpected response code: " + i.statusCode), r = new l(i.statusText, i.statusCode), this.running = !1) : this.running = !0, this.poll(this.url, n, r), [2, Promise.resolve()];
        } }); }); }, t.prototype.updateHeaderToken = function (t, e) { e ? t.headers.Authorization = "Bearer " + e : t.headers.Authorization && delete t.headers.Authorization; }, t.prototype.poll = function (t, e, n) { return i(this, void 0, void 0, function () { var o, r, s, i; return a(this, function (a) { switch (a.label) {
            case 0: a.trys.push([0, , 8, 9]), a.label = 1;
            case 1: return this.running ? [4, this.accessTokenFactory()] : [3, 7];
            case 2: o = a.sent(), this.updateHeaderToken(e, o), a.label = 3;
            case 3: return a.trys.push([3, 5, , 6]), r = t + "&_=" + Date.now(), this.logger.log(c.Trace, "(LongPolling transport) polling: " + r), [4, this.httpClient.get(r, e)];
            case 4: return 204 === (s = a.sent()).statusCode ? (this.logger.log(c.Information, "(LongPolling transport) Poll terminated by server"), this.running = !1) : 200 !== s.statusCode ? (this.logger.log(c.Error, "(LongPolling transport) Unexpected response code: " + s.statusCode), n = new l(s.statusText, s.statusCode), this.running = !1) : s.content ? (this.logger.log(c.Trace, "(LongPolling transport) data received. " + y(s.content, this.logMessageContent)), this.onreceive && this.onreceive(s.content)) : this.logger.log(c.Trace, "(LongPolling transport) Poll timed out, reissuing."), [3, 6];
            case 5: return i = a.sent(), this.running ? i instanceof u ? this.logger.log(c.Trace, "(LongPolling transport) Poll timed out, reissuing.") : (n = i, this.running = !1) : this.logger.log(c.Trace, "(LongPolling transport) Poll errored after shutdown: " + i.message), [3, 6];
            case 6: return [3, 1];
            case 7: return [3, 9];
            case 8: return this.stopped = !0, this.shutdownTimer && clearTimeout(this.shutdownTimer), this.onclose && (this.logger.log(c.Trace, "(LongPolling transport) Firing onclose event. Error: " + (n || "<undefined>")), this.onclose(n)), this.logger.log(c.Trace, "(LongPolling transport) Transport finished."), [7];
            case 9: return [2];
        } }); }); }, t.prototype.send = function (t) { return i(this, void 0, void 0, function () { return a(this, function (e) { return this.running ? [2, b(this.logger, "LongPolling", this.httpClient, this.url, this.accessTokenFactory, t, this.logMessageContent)] : [2, Promise.reject(new Error("Cannot send until the transport is connected"))]; }); }); }, t.prototype.stop = function () { return i(this, void 0, void 0, function () { var t, e, n = this; return a(this, function (o) { switch (o.label) {
            case 0: return o.trys.push([0, , 3, 4]), this.running = !1, this.logger.log(c.Trace, "(LongPolling transport) sending DELETE request to " + this.url + "."), t = { headers: {} }, [4, this.accessTokenFactory()];
            case 1: return e = o.sent(), this.updateHeaderToken(t, e), [4, this.httpClient.delete(this.url, t)];
            case 2: return o.sent(), this.logger.log(c.Trace, "(LongPolling transport) DELETE request accepted."), [3, 4];
            case 3: return this.stopped || (this.shutdownTimer = setTimeout(function () { n.logger.log(c.Warning, "(LongPolling transport) server did not terminate after DELETE request, canceling poll."), n.pollAbort.abort(); }, this.shutdownTimeout)), [7];
            case 4: return [2];
        } }); }); }, t; }(), R = function () { function t(t, e, n, o) { this.httpClient = t, this.accessTokenFactory = e || function () { return null; }, this.logger = n, this.logMessageContent = o; } return t.prototype.connect = function (t, e) { return i(this, void 0, void 0, function () { var n, o = this; return a(this, function (r) { switch (r.label) {
            case 0:
                if (m.isRequired(t, "url"), m.isRequired(e, "transferFormat"), m.isIn(e, S, "transferFormat"), "undefined" == typeof EventSource)
                    throw new Error("'EventSource' is not supported in your environment.");
                return this.logger.log(c.Trace, "(SSE transport) Connecting"), [4, this.accessTokenFactory()];
            case 1: return (n = r.sent()) && (t += (t.indexOf("?") < 0 ? "?" : "&") + "access_token=" + encodeURIComponent(n)), this.url = t, [2, new Promise(function (n, r) { var s = !1; e !== S.Text && r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format")); var i = new EventSource(t, { withCredentials: !0 }); try {
                    i.onmessage = function (t) { if (o.onreceive)
                        try {
                            o.logger.log(c.Trace, "(SSE transport) data received. " + y(t.data, o.logMessageContent) + "."), o.onreceive(t.data);
                        }
                        catch (t) {
                            return void (o.onclose && o.onclose(t));
                        } }, i.onerror = function (t) { var e = new Error(t.message || "Error occurred"); s ? o.close(e) : r(e); }, i.onopen = function () { o.logger.log(c.Information, "SSE connected to " + o.url), o.eventSource = i, s = !0, n(); };
                }
                catch (t) {
                    return Promise.reject(t);
                } })];
        } }); }); }, t.prototype.send = function (t) { return i(this, void 0, void 0, function () { return a(this, function (e) { return this.eventSource ? [2, b(this.logger, "SSE", this.httpClient, this.url, this.accessTokenFactory, t, this.logMessageContent)] : [2, Promise.reject(new Error("Cannot send until the transport is connected"))]; }); }); }, t.prototype.stop = function () { return this.close(), Promise.resolve(); }, t.prototype.close = function (t) { this.eventSource && (this.eventSource.close(), this.eventSource = null, this.onclose && this.onclose(t)); }, t; }(), q = function () { function t(t, e, n) { this.logger = e, this.accessTokenFactory = t || function () { return null; }, this.logMessageContent = n; } return t.prototype.connect = function (t, e) { return i(this, void 0, void 0, function () { var n, o = this; return a(this, function (r) { switch (r.label) {
            case 0:
                if (m.isRequired(t, "url"), m.isRequired(e, "transferFormat"), m.isIn(e, S, "transferFormat"), "undefined" == typeof WebSocket)
                    throw new Error("'WebSocket' is not supported in your environment.");
                return this.logger.log(c.Trace, "(WebSockets transport) Connecting"), [4, this.accessTokenFactory()];
            case 1: return (n = r.sent()) && (t += (t.indexOf("?") < 0 ? "?" : "&") + "access_token=" + encodeURIComponent(n)), [2, new Promise(function (n, r) { t = t.replace(/^http/, "ws"); var s = new WebSocket(t); e === S.Binary && (s.binaryType = "arraybuffer"), s.onopen = function (e) { o.logger.log(c.Information, "WebSocket connected to " + t), o.webSocket = s, n(); }, s.onerror = function (t) { r(t.error); }, s.onmessage = function (t) { o.logger.log(c.Trace, "(WebSockets transport) data received. " + y(t.data, o.logMessageContent) + "."), o.onreceive && o.onreceive(t.data); }, s.onclose = function (t) { o.logger.log(c.Trace, "(WebSockets transport) socket closed."), o.onclose && (!1 === t.wasClean || 1e3 !== t.code ? o.onclose(new Error("Websocket closed with status code: " + t.code + " (" + t.reason + ")")) : o.onclose()); }; })];
        } }); }); }, t.prototype.send = function (t) { return this.webSocket && this.webSocket.readyState === WebSocket.OPEN ? (this.logger.log(c.Trace, "(WebSockets transport) sending data. " + y(t, this.logMessageContent) + "."), this.webSocket.send(t), Promise.resolve()) : Promise.reject("WebSocket is not in the OPEN state"); }, t.prototype.stop = function () { return this.webSocket && (this.webSocket.close(), this.webSocket = null), Promise.resolve(); }, t; }(), O = function () { function t(t, e) { void 0 === e && (e = {}), this.features = {}, m.isRequired(t, "url"), this.logger = function (t) { return void 0 === t ? new k(c.Information) : null === t ? v.instance : t.log ? t : new k(t); }(e.logger), this.baseUrl = this.resolveUrl(t), (e = e || {}).accessTokenFactory = e.accessTokenFactory || function () { return null; }, e.logMessageContent = e.logMessageContent || !1, this.httpClient = e.httpClient || new g(this.logger), this.connectionState = 2, this.options = e; } return t.prototype.start = function (t) { return t = t || S.Binary, m.isIn(t, S, "transferFormat"), this.logger.log(c.Debug, "Starting connection with transfer format '" + S[t] + "'."), 2 !== this.connectionState ? Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")) : (this.connectionState = 0, this.startPromise = this.startInternal(t), this.startPromise); }, t.prototype.send = function (t) { if (1 !== this.connectionState)
            throw new Error("Cannot send data if the connection is not in the 'Connected' State."); return this.transport.send(t); }, t.prototype.stop = function (t) { return i(this, void 0, void 0, function () { return a(this, function (e) { switch (e.label) {
            case 0: this.connectionState = 2, e.label = 1;
            case 1: return e.trys.push([1, 3, , 4]), [4, this.startPromise];
            case 2: return e.sent(), [3, 4];
            case 3: return e.sent(), [3, 4];
            case 4: return this.transport ? (this.stopError = t, [4, this.transport.stop()]) : [3, 6];
            case 5: e.sent(), this.transport = null, e.label = 6;
            case 6: return [2];
        } }); }); }, t.prototype.startInternal = function (t) { return i(this, void 0, void 0, function () { var e, n, o, r, s, i, l, u = this; return a(this, function (h) { switch (h.label) {
            case 0: e = this.baseUrl, this.accessTokenFactory = this.options.accessTokenFactory, h.label = 1;
            case 1: return h.trys.push([1, 12, , 13]), this.options.skipNegotiation ? this.options.transport !== w.WebSockets ? [3, 3] : (this.transport = this.constructTransport(w.WebSockets), [4, this.transport.connect(e, t)]) : [3, 5];
            case 2: return h.sent(), [3, 4];
            case 3: throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");
            case 4: return [3, 11];
            case 5: n = null, o = 0, r = function () { var t; return a(this, function (r) { switch (r.label) {
                case 0: return [4, s.getNegotiationResponse(e)];
                case 1: return n = r.sent(), 2 === s.connectionState ? [2, { value: void 0 }] : (n.url && (e = n.url), n.accessToken && (t = n.accessToken, s.accessTokenFactory = function () { return t; }), o++, [2]);
            } }); }, s = this, h.label = 6;
            case 6: return [5, r()];
            case 7:
                if ("object" == typeof (i = h.sent()))
                    return [2, i.value];
                h.label = 8;
            case 8:
                if (n.url && o < 100)
                    return [3, 6];
                h.label = 9;
            case 9:
                if (100 === o && n.url)
                    throw Error("Negotiate redirection limit exceeded.");
                return [4, this.createTransport(e, this.options.transport, n, t)];
            case 10: h.sent(), h.label = 11;
            case 11: return this.transport instanceof M && (this.features.inherentKeepAlive = !0), this.transport.onreceive = this.onreceive, this.transport.onclose = function (t) { return u.stopConnection(t); }, this.changeState(0, 1), [3, 13];
            case 12: throw l = h.sent(), this.logger.log(c.Error, "Failed to start the connection: " + l), this.connectionState = 2, this.transport = null, l;
            case 13: return [2];
        } }); }); }, t.prototype.getNegotiationResponse = function (t) { return i(this, void 0, void 0, function () { var e, n, o, r, s, i; return a(this, function (a) { switch (a.label) {
            case 0: return [4, this.accessTokenFactory()];
            case 1: (e = a.sent()) && ((i = {}).Authorization = "Bearer " + e, n = i), o = this.resolveNegotiateUrl(t), this.logger.log(c.Debug, "Sending negotiation request: " + o), a.label = 2;
            case 2: return a.trys.push([2, 4, , 5]), [4, this.httpClient.post(o, { content: "", headers: n })];
            case 3:
                if (200 !== (r = a.sent()).statusCode)
                    throw Error("Unexpected status code returned from negotiate " + r.statusCode);
                return [2, JSON.parse(r.content)];
            case 4: throw s = a.sent(), this.logger.log(c.Error, "Failed to complete negotiation with the server: " + s), s;
            case 5: return [2];
        } }); }); }, t.prototype.createConnectUrl = function (t, e) { return t + (-1 === t.indexOf("?") ? "?" : "&") + "id=" + e; }, t.prototype.createTransport = function (t, e, n, o) { return i(this, void 0, void 0, function () { var r, s, i, l, u, h, p; return a(this, function (a) { switch (a.label) {
            case 0: return r = this.createConnectUrl(t, n.connectionId), this.isITransport(e) ? (this.logger.log(c.Debug, "Connection was provided an instance of ITransport, using that directly."), this.transport = e, [4, this.transport.connect(r, o)]) : [3, 2];
            case 1: return a.sent(), this.changeState(0, 1), [2];
            case 2: s = n.availableTransports, i = 0, l = s, a.label = 3;
            case 3: return i < l.length ? (u = l[i], this.connectionState = 0, "number" != typeof (h = this.resolveTransport(u, e, o)) ? [3, 8] : (this.transport = this.constructTransport(h), null !== n.connectionId ? [3, 5] : [4, this.getNegotiationResponse(t)])) : [3, 9];
            case 4: n = a.sent(), r = this.createConnectUrl(t, n.connectionId), a.label = 5;
            case 5: return a.trys.push([5, 7, , 8]), [4, this.transport.connect(r, o)];
            case 6: return a.sent(), this.changeState(0, 1), [2];
            case 7: return p = a.sent(), this.logger.log(c.Error, "Failed to start the transport '" + w[h] + "': " + p), this.connectionState = 2, n.connectionId = null, [3, 8];
            case 8: return i++, [3, 3];
            case 9: throw new Error("Unable to initialize any of the available transports.");
        } }); }); }, t.prototype.constructTransport = function (t) { switch (t) {
            case w.WebSockets: return new q(this.accessTokenFactory, this.logger, this.options.logMessageContent);
            case w.ServerSentEvents: return new R(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent);
            case w.LongPolling: return new M(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent);
            default: throw new Error("Unknown transport: " + t + ".");
        } }, t.prototype.resolveTransport = function (t, e, n) { var o = w[t.transport]; if (null === o || void 0 === o)
            this.logger.log(c.Debug, "Skipping transport '" + t.transport + "' because it is not supported by this client.");
        else {
            var r = t.transferFormats.map(function (t) { return S[t]; });
            if (function (t, e) { return !t || 0 != (e & t); }(e, o))
                if (r.indexOf(n) >= 0) {
                    if (!(o === w.WebSockets && "undefined" == typeof WebSocket || o === w.ServerSentEvents && "undefined" == typeof EventSource))
                        return this.logger.log(c.Debug, "Selecting transport '" + w[o] + "'"), o;
                    this.logger.log(c.Debug, "Skipping transport '" + w[o] + "' because it is not supported in your environment.'");
                }
                else
                    this.logger.log(c.Debug, "Skipping transport '" + w[o] + "' because it does not support the requested transfer format '" + S[n] + "'.");
            else
                this.logger.log(c.Debug, "Skipping transport '" + w[o] + "' because it was disabled by the client.");
        } return null; }, t.prototype.isITransport = function (t) { return t && "object" == typeof t && "connect" in t; }, t.prototype.changeState = function (t, e) { return this.connectionState === t && (this.connectionState = e, !0); }, t.prototype.stopConnection = function (t) { return i(this, void 0, void 0, function () { return a(this, function (e) { return this.transport = null, (t = this.stopError || t) ? this.logger.log(c.Error, "Connection disconnected with error '" + t + "'.") : this.logger.log(c.Information, "Connection disconnected."), this.connectionState = 2, this.onclose && this.onclose(t), [2]; }); }); }, t.prototype.resolveUrl = function (t) { if (0 === t.lastIndexOf("https://", 0) || 0 === t.lastIndexOf("http://", 0))
            return t; if ("undefined" == typeof window || !window || !window.document)
            throw new Error("Cannot resolve '" + t + "'."); var e = window.document.createElement("a"); return e.href = t, this.logger.log(c.Information, "Normalizing '" + t + "' to '" + e.href + "'."), e.href; }, t.prototype.resolveNegotiateUrl = function (t) { var e = t.indexOf("?"), n = t.substring(0, -1 === e ? t.length : e); return "/" !== n[n.length - 1] && (n += "/"), n += "negotiate", n += -1 === e ? "" : t.substring(e); }, t; }();
        var W = "json", U = function () { function t() { this.name = W, this.version = 1, this.transferFormat = S.Text; } return t.prototype.parseMessages = function (t, e) { if ("string" != typeof t)
            throw new Error("Invalid input for JSON hub protocol. Expected a string."); if (!t)
            return []; null === e && (e = v.instance); for (var n = [], o = 0, r = d.parse(t); o < r.length; o++) {
            var s = r[o], i = JSON.parse(s);
            if ("number" != typeof i.type)
                throw new Error("Invalid payload.");
            switch (i.type) {
                case h.Invocation:
                    this.isInvocationMessage(i);
                    break;
                case h.StreamItem:
                    this.isStreamItemMessage(i);
                    break;
                case h.Completion:
                    this.isCompletionMessage(i);
                    break;
                case h.Ping:
                case h.Close: break;
                default:
                    e.log(c.Information, "Unknown message type '" + i.type + "' ignored.");
                    continue;
            }
            n.push(i);
        } return n; }, t.prototype.writeMessage = function (t) { return d.write(JSON.stringify(t)); }, t.prototype.isInvocationMessage = function (t) { this.assertNotEmptyString(t.target, "Invalid payload for Invocation message."), void 0 !== t.invocationId && this.assertNotEmptyString(t.invocationId, "Invalid payload for Invocation message."); }, t.prototype.isStreamItemMessage = function (t) { if (this.assertNotEmptyString(t.invocationId, "Invalid payload for StreamItem message."), void 0 === t.item)
            throw new Error("Invalid payload for StreamItem message."); }, t.prototype.isCompletionMessage = function (t) { if (t.result && t.error)
            throw new Error("Invalid payload for Completion message."); !t.result && t.error && this.assertNotEmptyString(t.error, "Invalid payload for Completion message."), this.assertNotEmptyString(t.invocationId, "Invalid payload for Completion message."); }, t.prototype.assertNotEmptyString = function (t, e) { if ("string" != typeof t || "" === t)
            throw new Error(e); }, t; }(), N = function () { function t() { } return t.prototype.configureLogging = function (t) { return m.isRequired(t, "logging"), !function (t) { return void 0 !== t.log; }(t) ? this.logger = new k(t) : this.logger = t, this; }, t.prototype.withUrl = function (t, e) { return m.isRequired(t, "url"), this.url = t, this.httpConnectionOptions = "object" == typeof e ? e : { transport: e }, this; }, t.prototype.withHubProtocol = function (t) { return m.isRequired(t, "protocol"), this.protocol = t, this; }, t.prototype.build = function () { var t = this.httpConnectionOptions || {}; if (void 0 === t.logger && (t.logger = this.logger), !this.url)
            throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection."); var e = new O(this.url, t); return I.create(e, this.logger || v.instance, this.protocol || new U); }, t; }();
        var B, A, D, L, F, H, j, _ = function () { function t(t) { this.addressParam = t, this.parameter = "", this.requester = new XMLHttpRequest, this.address = t; } return t.prototype.send = function () { this.requester.open("GET", this.address.concat(this.parameter)), this.requester.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), this.requester.send(null); }, t.prototype.sendPut = function () { this.requester.open("PUT", this.address.concat(this.parameter)), this.requester.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), this.requester.send(null); }, t; }();
        function G(t) { if (13 == t.which) {
            var e = new _("https://localhost:5001/Main/UpdateApiKey/");
            e.parameter = A.val().toString(), e.send(), B.text("looking for new games..."), B.toggleClass("AnimUpdateDB"), A.off("keypress");
        } }
        function z(t) { $("#updates").append("<label>" + t + "</label><br/>"); var e = $("#updates > label:last").height() * $("#updates").children().length / 2; $("#updates").animate({ scrollTop: e }, 0, "", function () { }); }
        function J() { z("test " + j), j++; }
        function X(t) { var e = document.getElementById("ddChampion"); D.parameter = e.options[e.selectedIndex].value.toString(), D.send(), (F = new _("https://localhost:5001/Main/GetChampionIconStringByIDAsync/")).parameter = e.options[e.selectedIndex].value.toString(), F.requester.onreadystatechange = Q, F.send(); }
        function K(t) { if (4 === D.requester.readyState) {
            var e = JSON.parse(D.requester.responseText);
            console.log(e), "NaN" === e.WinRate2Weeks.toString() && (e.WinRate2Weeks = "-"), "NaN" === e.WinRate3Months.toString() && (e.WinRate3Months = "-"), "NaN" === e.WinRate.toString() && (e.WinRate = "-"), document.getElementById("lblWinRate2Weeks").innerText = e.WinRate2Weeks.toString() + "%", document.getElementById("lblGamesPlayed2Weeks").innerText = e.GameCount2Weeks.toString(), document.getElementById("lblAvgGameTime2Weeks").innerText = tt(e.AvgGameTime2Weeks), document.getElementById("lblWinRate3Months").innerText = e.WinRate3Months.toString() + "%", document.getElementById("lblGamesPlayed3Months").innerText = e.GameCount3Months.toString(), document.getElementById("lblAvgGameTime3Months").innerText = tt(e.AvgGameTime3Months), document.getElementById("lblWinRate").innerText = e.WinRate.toString() + "%", document.getElementById("lblGamesPlayed").innerText = e.GameCount.toString(), document.getElementById("lblAvgGameTime").innerText = tt(e.AvgGameTime);
        } }
        function Q() { if (4 === F.requester.readyState) {
            var t = JSON.parse(F.requester.responseText);
            console.log(t);
        } }
        function V(t) { if (4 === L.requester.readyState) {
            var e = JSON.parse(L.requester.responseText);
            console.log(e), e.forEach(function (t) { var e = document.createElement("option"); e.text = t.name, e.value = t.id, document.getElementById("ddChampion").appendChild(e); });
        } }
        function Y() { (L = new _("https://localhost:5001/Main/UpdateDB")).send(), L.requester.onload = Z, B.toggleClass("AnimUpdateDB"), $("#veil").css("display", "block"), $("#consoleContainer").toggleClass("scale1"); }
        function Z() { console.log("UpdateDB done"), $("#veil").css("display", "none"), $("#consoleContainer").toggleClass("scale1"), B.text("DB is up to date"), B.prop("disabled", !0), B.toggleClass("AnimUpdateDB"); }
        function tt(t) { if (0 === t)
            return "--:--"; var e = Math.floor(t / 60), n = Math.floor(t - 60 * e); return e + ":" + (n < 10 ? "0" + n : n); }
        function et() { var t = new _("https://localhost:5001/Main/UpdateStaticChampionData"); t.send(), t.requester.onload = nt, B.toggleClass("AnimUpdateDB"); }
        function nt() { B.text("Updated static champion data"), B.prop("disabled", !0), B.toggleClass("AnimUpdateDB"); }
        window.onload = function () { H = (new N).withUrl("/chatHub").build(), B = $("#btnUpdateDB"), A = $("#inputApiKey"), B.click(Y).toggleClass("AnimUpdateDB").text("looking for new games...").prop("disabled", !0), A.on("transitionend", function () { $("#topContainer").hasClass("topContainerOnNoRiotConnection") ? A.css("zIndex", 0) : A.css("zIndex", -1); }), document.getElementById("ddChampion").onchange = X, (D = new _("https://localhost:5001/Main/GetWinrateByChampID/")).requester.onreadystatechange = K, D.parameter = "202", D.send(), (L = new _("https://localhost:5001/Main/GetAllPlayedChampions")).requester.onreadystatechange = V, L.send(), H.on("ReceiveMessage", function (t, e) { var n = e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), o = t + " says " + n, r = document.createElement("li"); r.textContent = o, console.log(o); }), H.on("UpdateBtnUpdateDBText", function (t, e) { B.text("Update DB (" + e + ")").prop("disabled", !1).toggleClass("AnimUpdateDB"), console.log(t, e), "No new Matches" === e && (B.text("No new Matches"), B.prop("disabled", !0)), "No connection to Riot Servers" === e ? (B.text(e), B.prop("disabled", !0), $("#topContainer").addClass("topContainerOnNoRiotConnection"), A.on("keypress", G)) : $("#topContainer").hasClass("topContainerOnNoRiotConnection") && (A.css("zIndex", -1), $("#topContainer").toggleClass("topContainerOnNoRiotConnection")); }), H.on("AddMessageToConsole", function (t, e) { z(e), console.log(t, e); }), H.start().catch(function (t) { return console.error(t.toString()); }), $("#btnTest").click(function () { var t = new _("https://localhost:5001/Main/Main/"); t.send(); }), new _("https://localhost:5001/Main/Main/").send(), j = 0, $("#btnAddMessage").click(J), $("#btnUpdateStaticChampionData").click(et); };
    }, 5: function (t, e) { } });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGFzcG5ldC9zaWduYWxyL2Rpc3QvZXNtL0Vycm9ycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGFzcG5ldC9zaWduYWxyL2Rpc3QvZXNtL0lMb2dnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9IdHRwQ2xpZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vSUh1YlByb3RvY29sLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vVGV4dE1lc3NhZ2VGb3JtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9IYW5kc2hha2VQcm90b2NvbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGFzcG5ldC9zaWduYWxyL2Rpc3QvZXNtL0xvZ2dlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGFzcG5ldC9zaWduYWxyL2Rpc3QvZXNtL0lUcmFuc3BvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9IdWJDb25uZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vQWJvcnRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vTG9uZ1BvbGxpbmdUcmFuc3BvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9TZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vV2ViU29ja2V0VHJhbnNwb3J0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXNwbmV0L3NpZ25hbHIvZGlzdC9lc20vSHR0cENvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9Kc29uSHViUHJvdG9jb2wuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bhc3BuZXQvc2lnbmFsci9kaXN0L2VzbS9IdWJDb25uZWN0aW9uQnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGFzcG5ldC9zaWduYWxyL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovLy8uL0NsaWVudC90cy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9DbGllbnQvdHMvUmVxdWVzdGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiX19nZW5lcmF0b3IiLCJib2R5IiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJ2ZXJiIiwidGhyb3ciLCJyZXR1cm4iLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJMb2dMZXZlbCIsIkVycm9yc19IdHRwRXJyb3IiLCJfc3VwZXIiLCJIdHRwRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiX3RoaXMiLCJ0cnVlUHJvdG8iLCJFcnJvciIsIkVycm9yc19UaW1lb3V0RXJyb3IiLCJUaW1lb3V0RXJyb3IiLCJfbmV3VGFyZ2V0IiwiTWVzc2FnZVR5cGUiLCJIdHRwUmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwiY29udGVudCIsIkh0dHBDbGllbnRfRGVmYXVsdEh0dHBDbGllbnQiLCJEZWZhdWx0SHR0cENsaWVudCIsImxvZ2dlciIsInNlbmQiLCJyZXF1ZXN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwibWV0aG9kIiwidXJsIiwid2l0aENyZWRlbnRpYWxzIiwic2V0UmVxdWVzdEhlYWRlciIsImhlYWRlcnMiLCJrZXlzIiwiZm9yRWFjaCIsImhlYWRlciIsInJlc3BvbnNlVHlwZSIsImFib3J0U2lnbmFsIiwib25hYm9ydCIsImFib3J0IiwidGltZW91dCIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlIiwicmVzcG9uc2VUZXh0Iiwib25lcnJvciIsImxvZyIsIldhcm5pbmciLCJvbnRpbWVvdXQiLCJIdHRwQ2xpZW50Iiwib3B0aW9ucyIsInBvc3QiLCJkZWxldGUiLCJUZXh0TWVzc2FnZUZvcm1hdCIsIndyaXRlIiwib3V0cHV0IiwiUmVjb3JkU2VwYXJhdG9yIiwicGFyc2UiLCJpbnB1dCIsIm1lc3NhZ2VzIiwic3BsaXQiLCJSZWNvcmRTZXBhcmF0b3JDb2RlIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiSGFuZHNoYWtlUHJvdG9jb2xfSGFuZHNoYWtlUHJvdG9jb2wiLCJIYW5kc2hha2VQcm90b2NvbCIsIndyaXRlSGFuZHNoYWtlUmVxdWVzdCIsImhhbmRzaGFrZVJlcXVlc3QiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2VIYW5kc2hha2VSZXNwb25zZSIsImRhdGEiLCJtZXNzYWdlRGF0YSIsInJlbWFpbmluZ0RhdGEiLCJBcnJheUJ1ZmZlciIsImJpbmFyeURhdGEiLCJVaW50OEFycmF5Iiwic2VwYXJhdG9ySW5kZXgiLCJpbmRleE9mIiwicmVzcG9uc2VMZW5ndGgiLCJzbGljZSIsImJ5dGVMZW5ndGgiLCJidWZmZXIiLCJ0ZXh0RGF0YSIsInN1YnN0cmluZyIsIk51bGxMb2dnZXIiLCJsb2dMZXZlbCIsIm1lc3NhZ2UiLCJpbnN0YW5jZSIsIkFyZyIsImlzUmVxdWlyZWQiLCJ2YWwiLCJ1bmRlZmluZWQiLCJpc0luIiwidmFsdWVzIiwiZ2V0RGF0YURldGFpbCIsImluY2x1ZGVDb250ZW50Iiwic3RyIiwibnVtIiwidG9TdHJpbmciLCJzdWJzdHIiLCJmb3JtYXRBcnJheUJ1ZmZlciIsInNlbmRNZXNzYWdlIiwidHJhbnNwb3J0TmFtZSIsImh0dHBDbGllbnQiLCJhY2Nlc3NUb2tlbkZhY3RvcnkiLCJsb2dNZXNzYWdlQ29udGVudCIsInRva2VuIiwiX2EiLCJfYiIsIlRyYWNlIiwiSHR0cFRyYW5zcG9ydFR5cGUiLCJUcmFuc2ZlckZvcm1hdCIsIlN1YmplY3QiLCJjYW5jZWxDYWxsYmFjayIsIm9ic2VydmVycyIsIml0ZW0iLCJfaSIsImVycm9yIiwiZXJyIiwib2JzZXJ2ZXIiLCJjb21wbGV0ZSIsInN1YnNjcmliZSIsIlN1YmplY3RTdWJzY3JpcHRpb24iLCJzdWJqZWN0IiwiZGlzcG9zZSIsImluZGV4Iiwic3BsaWNlIiwiY2F0Y2giLCJVdGlsc19Db25zb2xlTG9nZ2VyIiwiQ29uc29sZUxvZ2dlciIsIm1pbmltdW1Mb2dMZXZlbCIsIkNyaXRpY2FsIiwiY29uc29sZSIsIndhcm4iLCJJbmZvcm1hdGlvbiIsImluZm8iLCJERUZBVUxUX1RJTUVPVVRfSU5fTVMiLCJIdWJDb25uZWN0aW9uX0h1YkNvbm5lY3Rpb24iLCJIdWJDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsInByb3RvY29sIiwic2VydmVyVGltZW91dEluTWlsbGlzZWNvbmRzIiwiaGFuZHNoYWtlUHJvdG9jb2wiLCJvbnJlY2VpdmUiLCJwcm9jZXNzSW5jb21pbmdEYXRhIiwib25jbG9zZSIsImNvbm5lY3Rpb25DbG9zZWQiLCJjYWxsYmFja3MiLCJtZXRob2RzIiwiY2xvc2VkQ2FsbGJhY2tzIiwiaWQiLCJzdGFydCIsInZlcnNpb24iLCJEZWJ1ZyIsInJlY2VpdmVkSGFuZHNoYWtlUmVzcG9uc2UiLCJ0cmFuc2ZlckZvcm1hdCIsImNsZWFudXBUaW1lb3V0IiwiY29uZmlndXJlVGltZW91dCIsInN0b3AiLCJzdHJlYW0iLCJtZXRob2ROYW1lIiwiYXJncyIsImludm9jYXRpb25EZXNjcmlwdG9yIiwiY3JlYXRlU3RyZWFtSW52b2NhdGlvbiIsImNhbmNlbEludm9jYXRpb24iLCJjcmVhdGVDYW5jZWxJbnZvY2F0aW9uIiwiaW52b2NhdGlvbklkIiwiY2FuY2VsTWVzc2FnZSIsIndyaXRlTWVzc2FnZSIsImludm9jYXRpb25FdmVudCIsInR5cGUiLCJDb21wbGV0aW9uIiwiY3JlYXRlSW52b2NhdGlvbiIsImludm9rZSIsImNvbXBsZXRpb25NZXNzYWdlIiwib24iLCJuZXdNZXRob2QiLCJ0b0xvd2VyQ2FzZSIsIm9mZiIsImhhbmRsZXJzIiwicmVtb3ZlSWR4IiwiY2FsbGJhY2siLCJwcm9jZXNzSGFuZHNoYWtlUmVzcG9uc2UiLCJtZXNzYWdlc18xIiwicGFyc2VNZXNzYWdlcyIsIkludm9jYXRpb24iLCJpbnZva2VDbGllbnRNZXRob2QiLCJTdHJlYW1JdGVtIiwiUGluZyIsIkNsb3NlIiwicmVzcG9uc2VNZXNzYWdlIiwiZmVhdHVyZXMiLCJpbmhlcmVudEtlZXBBbGl2ZSIsInRpbWVvdXRIYW5kbGUiLCJzZXRUaW1lb3V0Iiwic2VydmVyVGltZW91dCIsImludm9jYXRpb25NZXNzYWdlIiwidGFyZ2V0IiwiY2xlYXJUaW1lb3V0Iiwibm9uYmxvY2tpbmciLCJTdHJlYW1JbnZvY2F0aW9uIiwiQ2FuY2VsSW52b2NhdGlvbiIsIkFib3J0Q29udHJvbGxlciIsImlzQWJvcnRlZCIsImNvbmZpZ3VyYWJsZSIsIlNIVVRET1dOX1RJTUVPVVQiLCJMb25nUG9sbGluZ1RyYW5zcG9ydF9Mb25nUG9sbGluZ1RyYW5zcG9ydCIsIkxvbmdQb2xsaW5nVHJhbnNwb3J0Iiwic2h1dGRvd25UaW1lb3V0IiwicG9sbEFib3J0IiwiYWJvcnRlZCIsImNvbm5lY3QiLCJwb2xsT3B0aW9ucyIsImNsb3NlRXJyb3IiLCJwb2xsVXJsIiwiQmluYXJ5Iiwic2lnbmFsIiwidXBkYXRlSGVhZGVyVG9rZW4iLCJEYXRlIiwibm93IiwicnVubmluZyIsInBvbGwiLCJlXzEiLCJzdG9wcGVkIiwic2h1dGRvd25UaW1lciIsImRlbGV0ZU9wdGlvbnMiLCJTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0X1NlcnZlclNlbnRFdmVudHNUcmFuc3BvcnQiLCJTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwib3BlbmVkIiwiVGV4dCIsImV2ZW50U291cmNlIiwiRXZlbnRTb3VyY2UiLCJvbm1lc3NhZ2UiLCJjbG9zZSIsIm9ub3BlbiIsIldlYlNvY2tldFRyYW5zcG9ydF9XZWJTb2NrZXRUcmFuc3BvcnQiLCJXZWJTb2NrZXRUcmFuc3BvcnQiLCJyZXBsYWNlIiwid2ViU29ja2V0IiwiV2ViU29ja2V0IiwiYmluYXJ5VHlwZSIsImV2ZW50Iiwid2FzQ2xlYW4iLCJjb2RlIiwicmVhc29uIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJIdHRwQ29ubmVjdGlvbl9IdHRwQ29ubmVjdGlvbiIsIkh0dHBDb25uZWN0aW9uIiwiY3JlYXRlTG9nZ2VyIiwiYmFzZVVybCIsInJlc29sdmVVcmwiLCJjb25uZWN0aW9uU3RhdGUiLCJzdGFydFByb21pc2UiLCJzdGFydEludGVybmFsIiwidHJhbnNwb3J0Iiwic3RvcEVycm9yIiwibmVnb3RpYXRlUmVzcG9uc2UiLCJyZWRpcmVjdHMiLCJfbG9vcF8xIiwidGhpc18xIiwic3RhdGVfMSIsImVfMiIsInNraXBOZWdvdGlhdGlvbiIsIldlYlNvY2tldHMiLCJjb25zdHJ1Y3RUcmFuc3BvcnQiLCJhY2Nlc3NUb2tlbl8xIiwiZ2V0TmVnb3RpYXRpb25SZXNwb25zZSIsImFjY2Vzc1Rva2VuIiwiY3JlYXRlVHJhbnNwb3J0Iiwic3RvcENvbm5lY3Rpb24iLCJjaGFuZ2VTdGF0ZSIsIm5lZ290aWF0ZVVybCIsImVfMyIsInJlc29sdmVOZWdvdGlhdGVVcmwiLCJjcmVhdGVDb25uZWN0VXJsIiwiY29ubmVjdGlvbklkIiwicmVxdWVzdGVkVHJhbnNwb3J0IiwicmVxdWVzdGVkVHJhbnNmZXJGb3JtYXQiLCJjb25uZWN0VXJsIiwidHJhbnNwb3J0cyIsInRyYW5zcG9ydHNfMSIsImVuZHBvaW50IiwiZXhfMSIsImlzSVRyYW5zcG9ydCIsImF2YWlsYWJsZVRyYW5zcG9ydHMiLCJyZXNvbHZlVHJhbnNwb3J0IiwiU2VydmVyU2VudEV2ZW50cyIsIkxvbmdQb2xsaW5nIiwidHJhbnNmZXJGb3JtYXRzIiwibWFwIiwiYWN0dWFsVHJhbnNwb3J0IiwidHJhbnNwb3J0TWF0Y2hlcyIsImZyb20iLCJ0byIsImxhc3RJbmRleE9mIiwid2luZG93IiwiZG9jdW1lbnQiLCJhVGFnIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJKU09OX0hVQl9QUk9UT0NPTF9OQU1FIiwiSnNvbkh1YlByb3RvY29sX0pzb25IdWJQcm90b2NvbCIsIkpzb25IdWJQcm90b2NvbCIsImh1Yk1lc3NhZ2VzIiwicGFyc2VkTWVzc2FnZSIsImlzSW52b2NhdGlvbk1lc3NhZ2UiLCJpc1N0cmVhbUl0ZW1NZXNzYWdlIiwiaXNDb21wbGV0aW9uTWVzc2FnZSIsImFzc2VydE5vdEVtcHR5U3RyaW5nIiwiSHViQ29ubmVjdGlvbkJ1aWxkZXJfSHViQ29ubmVjdGlvbkJ1aWxkZXIiLCJIdWJDb25uZWN0aW9uQnVpbGRlciIsImNvbmZpZ3VyZUxvZ2dpbmciLCJsb2dnaW5nIiwiaXNMb2dnZXIiLCJ3aXRoVXJsIiwidHJhbnNwb3J0VHlwZU9yT3B0aW9ucyIsImh0dHBDb25uZWN0aW9uT3B0aW9ucyIsIndpdGhIdWJQcm90b2NvbCIsImJ1aWxkIiwiYnRuVXBkYXRlREIiLCJpbnB1dEFwaUtleSIsInJlcXVlc3RlcldpbnJhdGUiLCJyZXF1ZXN0ZXJVcGRhdGVEQiIsInJlcXVlc3RlckNoYW1waW9uSWNvblN0cmluZyIsImNoYW5uZWxTZXJ2ZXJNc2ciLCJSZXF1ZXN0ZXIiLCJhZGRyZXNzUGFyYW0iLCJwYXJhbWV0ZXIiLCJyZXF1ZXN0ZXIiLCJhZGRyZXNzIiwiY29uY2F0Iiwic2VuZFB1dCIsIm9uS2V5cHJlc3NJbnB1dEFwaUtleSIsIndoaWNoIiwidGV4dCIsInRvZ2dsZUNsYXNzIiwiYWRkTWVzc2FnZVRvQ29uc29sZSIsIiQiLCJhcHBlbmQiLCJzY3JvbGxQb3MiLCJoZWlnaHQiLCJjaGlsZHJlbiIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvbkJ0bkFkZE1lc3NhZ2VDbGljayIsIm9uRGRDaGFtcGlvblNlbGVjdCIsInNlbGVjdCIsImdldEVsZW1lbnRCeUlkIiwic2VsZWN0ZWRJbmRleCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInNldEljb25TdHJpbmciLCJzZXRXaW5yYXRlSW5mbyIsIldpblJhdGUyV2Vla3MiLCJXaW5SYXRlM01vbnRocyIsIldpblJhdGUiLCJpbm5lclRleHQiLCJHYW1lQ291bnQyV2Vla3MiLCJjb252ZXJ0U2Vjb25kc1RvVGltZSIsIkF2Z0dhbWVUaW1lMldlZWtzIiwiR2FtZUNvdW50M01vbnRocyIsIkF2Z0dhbWVUaW1lM01vbnRocyIsIkdhbWVDb3VudCIsIkF2Z0dhbWVUaW1lIiwic2V0QWxsUGxheWVkQ2hhbXBpb25zIiwiY2hhbXBpb24iLCJuZXdvcHRpb24iLCJhcHBlbmRDaGlsZCIsIm9uQ2xpY2tCdG5VcGRhdGVEQiIsIm9uVXBkYXRlREJTdWNjZXNzIiwiY3NzIiwicHJvcCIsInNlY29uZHMiLCJtaW51dGVzIiwiTWF0aCIsImZsb29yIiwic2VjcyIsIm9uQnRuVXBkYXRlU3RhdGljQ2hhbXBpb25EYXRhQ2xpY2siLCJyZXF1ZXN0ZXJVcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGEiLCJvblVwZGF0ZVN0YXRpY0NoYW1waW9uRGF0YVN1Y2Nlc3MiLCJjbGljayIsImhhc0NsYXNzIiwib25jaGFuZ2UiLCJ1c2VyIiwibXNnIiwiZW5jb2RlZE1zZyIsImxpIiwidGV4dENvbnRlbnQiLCJhZGRDbGFzcyIsIngiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNB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LHNCQUNoQixTQUFDaU4sRUFBTTFTLEdBQ0g0UCxFQUFvQjVQLEdBQ3BCOEMsUUFBUXZGLElBQUltVixFQUFNMVMsS0FJMUJnUCxFQUFpQi9LLFFBQVF4QixNQUFNLFNBQUFULEdBQU8sT0FBQWMsUUFBUWYsTUFBTUMsRUFBSXBCLGNBRXhEaVAsRUFBRSxZQUFZMEMsTUFBTSxXQUVoQixJQUFJUyxFQUFJLElBQUkvRCxFQUFVLHFDQUN0QitELEVBQUVoWCxTQUdjLElBQUlpVCxFQUFVLHFDQUNwQmpULE9BRWRwRyxFQUFJLEVBQ0ppYSxFQUFFLGtCQUFrQjBDLE1BQU1uQyxHQUMxQlAsRUFBRSxnQ0FBZ0MwQyxNQUFNSCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi93d3d3cm9vdC9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgLk5FVCBGb3VuZGF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuLyoqIEVycm9yIHRocm93biB3aGVuIGFuIEhUVFAgcmVxdWVzdCBmYWlscy4gKi9cclxudmFyIEh0dHBFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEh0dHBFcnJvciwgX3N1cGVyKTtcclxuICAgIC8qKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBIdHRwRXJyb3J9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvck1lc3NhZ2UgQSBkZXNjcmlwdGl2ZSBlcnJvciBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1c0NvZGUgVGhlIEhUVFAgc3RhdHVzIGNvZGUgcmVwcmVzZW50ZWQgYnkgdGhpcyBlcnJvci5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gSHR0cEVycm9yKGVycm9yTWVzc2FnZSwgc3RhdHVzQ29kZSkge1xyXG4gICAgICAgIHZhciBfbmV3VGFyZ2V0ID0gdGhpcy5jb25zdHJ1Y3RvcjtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0cnVlUHJvdG8gPSBfbmV3VGFyZ2V0LnByb3RvdHlwZTtcclxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yTWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgICAgICAvLyBXb3JrYXJvdW5kIGlzc3VlIGluIFR5cGVzY3JpcHQgY29tcGlsZXJcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzEzOTY1I2lzc3VlY29tbWVudC0yNzg1NzAyMDBcclxuICAgICAgICBfdGhpcy5fX3Byb3RvX18gPSB0cnVlUHJvdG87XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEh0dHBFcnJvcjtcclxufShFcnJvcikpO1xyXG5leHBvcnQgeyBIdHRwRXJyb3IgfTtcclxuLyoqIEVycm9yIHRocm93biB3aGVuIGEgdGltZW91dCBlbGFwc2VzLiAqL1xyXG52YXIgVGltZW91dEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVGltZW91dEVycm9yLCBfc3VwZXIpO1xyXG4gICAgLyoqIENvbnN0cnVjdHMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIFRpbWVvdXRFcnJvcn0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yTWVzc2FnZSBBIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2UuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRpbWVvdXRFcnJvcihlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7XHJcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZSA9PT0gdm9pZCAwKSB7IGVycm9yTWVzc2FnZSA9IFwiQSB0aW1lb3V0IG9jY3VycmVkLlwiOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdHJ1ZVByb3RvID0gX25ld1RhcmdldC5wcm90b3R5cGU7XHJcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvck1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBpc3N1ZSBpbiBUeXBlc2NyaXB0IGNvbXBpbGVyXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMzk2NSNpc3N1ZWNvbW1lbnQtMjc4NTcwMjAwXHJcbiAgICAgICAgX3RoaXMuX19wcm90b19fID0gdHJ1ZVByb3RvO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBUaW1lb3V0RXJyb3I7XHJcbn0oRXJyb3IpKTtcclxuZXhwb3J0IHsgVGltZW91dEVycm9yIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVycm9ycy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8vIFRoZXNlIHZhbHVlcyBhcmUgZGVzaWduZWQgdG8gbWF0Y2ggdGhlIEFTUC5ORVQgTG9nIExldmVscyBzaW5jZSB0aGF0J3MgdGhlIHBhdHRlcm4gd2UncmUgZW11bGF0aW5nIGhlcmUuXHJcbi8qKiBJbmRpY2F0ZXMgdGhlIHNldmVyaXR5IG9mIGEgbG9nIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIExvZyBMZXZlbHMgYXJlIG9yZGVyZWQgaW4gaW5jcmVhc2luZyBzZXZlcml0eS4gU28gYERlYnVnYCBpcyBtb3JlIHNldmVyZSB0aGFuIGBUcmFjZWAsIGV0Yy5cclxuICovXHJcbmV4cG9ydCB2YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIC8qKiBMb2cgbGV2ZWwgZm9yIHZlcnkgbG93IHNldmVyaXR5IGRpYWdub3N0aWMgbWVzc2FnZXMuICovXHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlRyYWNlXCJdID0gMF0gPSBcIlRyYWNlXCI7XHJcbiAgICAvKiogTG9nIGxldmVsIGZvciBsb3cgc2V2ZXJpdHkgZGlhZ25vc3RpYyBtZXNzYWdlcy4gKi9cclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRGVidWdcIl0gPSAxXSA9IFwiRGVidWdcIjtcclxuICAgIC8qKiBMb2cgbGV2ZWwgZm9yIGluZm9ybWF0aW9uYWwgZGlhZ25vc3RpYyBtZXNzYWdlcy4gKi9cclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSW5mb3JtYXRpb25cIl0gPSAyXSA9IFwiSW5mb3JtYXRpb25cIjtcclxuICAgIC8qKiBMb2cgbGV2ZWwgZm9yIGRpYWdub3N0aWMgbWVzc2FnZXMgdGhhdCBpbmRpY2F0ZSBhIG5vbi1mYXRhbCBwcm9ibGVtLiAqL1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXYXJuaW5nXCJdID0gM10gPSBcIldhcm5pbmdcIjtcclxuICAgIC8qKiBMb2cgbGV2ZWwgZm9yIGRpYWdub3N0aWMgbWVzc2FnZXMgdGhhdCBpbmRpY2F0ZSBhIGZhaWx1cmUgaW4gdGhlIGN1cnJlbnQgb3BlcmF0aW9uLiAqL1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFcnJvclwiXSA9IDRdID0gXCJFcnJvclwiO1xyXG4gICAgLyoqIExvZyBsZXZlbCBmb3IgZGlhZ25vc3RpYyBtZXNzYWdlcyB0aGF0IGluZGljYXRlIGEgZmFpbHVyZSB0aGF0IHdpbGwgdGVybWluYXRlIHRoZSBlbnRpcmUgYXBwbGljYXRpb24uICovXHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkNyaXRpY2FsXCJdID0gNV0gPSBcIkNyaXRpY2FsXCI7XHJcbiAgICAvKiogVGhlIGhpZ2hlc3QgcG9zc2libGUgbG9nIGxldmVsLiBVc2VkIHdoZW4gY29uZmlndXJpbmcgbG9nZ2luZyB0byBpbmRpY2F0ZSB0aGF0IG5vIGxvZyBtZXNzYWdlcyBzaG91bGQgYmUgZW1pdHRlZC4gKi9cclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiTm9uZVwiXSA9IDZdID0gXCJOb25lXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlMb2dnZXIuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IsIFRpbWVvdXRFcnJvciB9IGZyb20gXCIuL0Vycm9yc1wiO1xyXG5pbXBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0lMb2dnZXJcIjtcclxuLyoqIFJlcHJlc2VudHMgYW4gSFRUUCByZXNwb25zZS4gKi9cclxudmFyIEh0dHBSZXNwb25zZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEh0dHBSZXNwb25zZShzdGF0dXNDb2RlLCBzdGF0dXNUZXh0LCBjb250ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgICAgICB0aGlzLnN0YXR1c1RleHQgPSBzdGF0dXNUZXh0O1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSHR0cFJlc3BvbnNlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBIdHRwUmVzcG9uc2UgfTtcclxuLyoqIEFic3RyYWN0aW9uIG92ZXIgYW4gSFRUUCBjbGllbnQuXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgYW4gYWJzdHJhY3Rpb24gb3ZlciBhbiBIVFRQIGNsaWVudCBzbyB0aGF0IGEgZGlmZmVyZW50IGltcGxlbWVudGF0aW9uIGNhbiBiZSBwcm92aWRlZCBvbiBkaWZmZXJlbnQgcGxhdGZvcm1zLlxyXG4gKi9cclxudmFyIEh0dHBDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIdHRwQ2xpZW50KCkge1xyXG4gICAgfVxyXG4gICAgSHR0cENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQodHNsaWJfMS5fX2Fzc2lnbih7fSwgb3B0aW9ucywgeyBtZXRob2Q6IFwiR0VUXCIsIHVybDogdXJsIH0pKTtcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQodHNsaWJfMS5fX2Fzc2lnbih7fSwgb3B0aW9ucywgeyBtZXRob2Q6IFwiUE9TVFwiLCB1cmw6IHVybCB9KSk7XHJcbiAgICB9O1xyXG4gICAgSHR0cENsaWVudC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQodHNsaWJfMS5fX2Fzc2lnbih7fSwgb3B0aW9ucywgeyBtZXRob2Q6IFwiREVMRVRFXCIsIHVybDogdXJsIH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSHR0cENsaWVudDtcclxufSgpKTtcclxuZXhwb3J0IHsgSHR0cENsaWVudCB9O1xyXG4vKiogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgSHR0cENsaWVudH0uICovXHJcbnZhciBEZWZhdWx0SHR0cENsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKERlZmF1bHRIdHRwQ2xpZW50LCBfc3VwZXIpO1xyXG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBEZWZhdWx0SHR0cENsaWVudH0sIHVzaW5nIHRoZSBwcm92aWRlZCB7QGxpbmsgSUxvZ2dlcn0gdG8gbG9nIG1lc3NhZ2VzLiAqL1xyXG4gICAgZnVuY3Rpb24gRGVmYXVsdEh0dHBDbGllbnQobG9nZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5sb2dnZXIgPSBsb2dnZXI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBEZWZhdWx0SHR0cENsaWVudC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3QuaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocmVxdWVzdC5oZWFkZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHsgcmV0dXJuIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgcmVxdWVzdC5oZWFkZXJzW2hlYWRlcl0pOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5yZXNwb25zZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSByZXF1ZXN0LnJlc3BvbnNlVHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5hYm9ydFNpZ25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5hYm9ydFNpZ25hbC5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC50aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICB4aHIudGltZW91dCA9IHJlcXVlc3QudGltZW91dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QuYWJvcnRTaWduYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmFib3J0U2lnbmFsLm9uYWJvcnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBIdHRwUmVzcG9uc2UoeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIHhoci5yZXNwb25zZSB8fCB4aHIucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEh0dHBFcnJvcih4aHIuc3RhdHVzVGV4dCwgeGhyLnN0YXR1cykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuV2FybmluZywgXCJFcnJvciBmcm9tIEhUVFAgcmVxdWVzdC4gXCIgKyB4aHIuc3RhdHVzICsgXCI6IFwiICsgeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBIdHRwRXJyb3IoeGhyLnN0YXR1c1RleHQsIHhoci5zdGF0dXMpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuV2FybmluZywgXCJUaW1lb3V0IGZyb20gSFRUUCByZXF1ZXN0LlwiKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgVGltZW91dEVycm9yKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChyZXF1ZXN0LmNvbnRlbnQgfHwgXCJcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlZmF1bHRIdHRwQ2xpZW50O1xyXG59KEh0dHBDbGllbnQpKTtcclxuZXhwb3J0IHsgRGVmYXVsdEh0dHBDbGllbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SHR0cENsaWVudC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8qKiBEZWZpbmVzIHRoZSB0eXBlIG9mIGEgSHViIE1lc3NhZ2UuICovXHJcbmV4cG9ydCB2YXIgTWVzc2FnZVR5cGU7XHJcbihmdW5jdGlvbiAoTWVzc2FnZVR5cGUpIHtcclxuICAgIC8qKiBJbmRpY2F0ZXMgdGhlIG1lc3NhZ2UgaXMgYW4gSW52b2NhdGlvbiBtZXNzYWdlIGFuZCBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgSW52b2NhdGlvbk1lc3NhZ2V9IGludGVyZmFjZS4gKi9cclxuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiSW52b2NhdGlvblwiXSA9IDFdID0gXCJJbnZvY2F0aW9uXCI7XHJcbiAgICAvKiogSW5kaWNhdGVzIHRoZSBtZXNzYWdlIGlzIGEgU3RyZWFtSXRlbSBtZXNzYWdlIGFuZCBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgU3RyZWFtSXRlbU1lc3NhZ2V9IGludGVyZmFjZS4gKi9cclxuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiU3RyZWFtSXRlbVwiXSA9IDJdID0gXCJTdHJlYW1JdGVtXCI7XHJcbiAgICAvKiogSW5kaWNhdGVzIHRoZSBtZXNzYWdlIGlzIGEgQ29tcGxldGlvbiBtZXNzYWdlIGFuZCBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgQ29tcGxldGlvbk1lc3NhZ2V9IGludGVyZmFjZS4gKi9cclxuICAgIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiQ29tcGxldGlvblwiXSA9IDNdID0gXCJDb21wbGV0aW9uXCI7XHJcbiAgICAvKiogSW5kaWNhdGVzIHRoZSBtZXNzYWdlIGlzIGEgU3RyZWFtIEludm9jYXRpb24gbWVzc2FnZSBhbmQgaW1wbGVtZW50cyB0aGUge0BsaW5rIFN0cmVhbUludm9jYXRpb25NZXNzYWdlfSBpbnRlcmZhY2UuICovXHJcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIlN0cmVhbUludm9jYXRpb25cIl0gPSA0XSA9IFwiU3RyZWFtSW52b2NhdGlvblwiO1xyXG4gICAgLyoqIEluZGljYXRlcyB0aGUgbWVzc2FnZSBpcyBhIENhbmNlbCBJbnZvY2F0aW9uIG1lc3NhZ2UgYW5kIGltcGxlbWVudHMgdGhlIHtAbGluayBDYW5jZWxJbnZvY2F0aW9uTWVzc2FnZX0gaW50ZXJmYWNlLiAqL1xyXG4gICAgTWVzc2FnZVR5cGVbTWVzc2FnZVR5cGVbXCJDYW5jZWxJbnZvY2F0aW9uXCJdID0gNV0gPSBcIkNhbmNlbEludm9jYXRpb25cIjtcclxuICAgIC8qKiBJbmRpY2F0ZXMgdGhlIG1lc3NhZ2UgaXMgYSBQaW5nIG1lc3NhZ2UgYW5kIGltcGxlbWVudHMgdGhlIHtAbGluayBQaW5nTWVzc2FnZX0gaW50ZXJmYWNlLiAqL1xyXG4gICAgTWVzc2FnZVR5cGVbTWVzc2FnZVR5cGVbXCJQaW5nXCJdID0gNl0gPSBcIlBpbmdcIjtcclxuICAgIC8qKiBJbmRpY2F0ZXMgdGhlIG1lc3NhZ2UgaXMgYSBDbG9zZSBtZXNzYWdlIGFuZCBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgQ2xvc2VNZXNzYWdlfSBpbnRlcmZhY2UuICovXHJcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIkNsb3NlXCJdID0gN10gPSBcIkNsb3NlXCI7XHJcbn0pKE1lc3NhZ2VUeXBlIHx8IChNZXNzYWdlVHlwZSA9IHt9KSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlIdWJQcm90b2NvbC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8vIE5vdCBleHBvcnRlZCBmcm9tIGluZGV4XHJcbnZhciBUZXh0TWVzc2FnZUZvcm1hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRleHRNZXNzYWdlRm9ybWF0KCkge1xyXG4gICAgfVxyXG4gICAgVGV4dE1lc3NhZ2VGb3JtYXQud3JpdGUgPSBmdW5jdGlvbiAob3V0cHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBvdXRwdXQgKyBUZXh0TWVzc2FnZUZvcm1hdC5SZWNvcmRTZXBhcmF0b3I7XHJcbiAgICB9O1xyXG4gICAgVGV4dE1lc3NhZ2VGb3JtYXQucGFyc2UgPSBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICBpZiAoaW5wdXRbaW5wdXQubGVuZ3RoIC0gMV0gIT09IFRleHRNZXNzYWdlRm9ybWF0LlJlY29yZFNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXNzYWdlIGlzIGluY29tcGxldGUuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWVzc2FnZXMgPSBpbnB1dC5zcGxpdChUZXh0TWVzc2FnZUZvcm1hdC5SZWNvcmRTZXBhcmF0b3IpO1xyXG4gICAgICAgIG1lc3NhZ2VzLnBvcCgpO1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcclxuICAgIH07XHJcbiAgICBUZXh0TWVzc2FnZUZvcm1hdC5SZWNvcmRTZXBhcmF0b3JDb2RlID0gMHgxZTtcclxuICAgIFRleHRNZXNzYWdlRm9ybWF0LlJlY29yZFNlcGFyYXRvciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoVGV4dE1lc3NhZ2VGb3JtYXQuUmVjb3JkU2VwYXJhdG9yQ29kZSk7XHJcbiAgICByZXR1cm4gVGV4dE1lc3NhZ2VGb3JtYXQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFRleHRNZXNzYWdlRm9ybWF0IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRleHRNZXNzYWdlRm9ybWF0LmpzLm1hcCIsIi8vIENvcHlyaWdodCAoYykgLk5FVCBGb3VuZGF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuaW1wb3J0IHsgVGV4dE1lc3NhZ2VGb3JtYXQgfSBmcm9tIFwiLi9UZXh0TWVzc2FnZUZvcm1hdFwiO1xyXG52YXIgSGFuZHNoYWtlUHJvdG9jb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIYW5kc2hha2VQcm90b2NvbCgpIHtcclxuICAgIH1cclxuICAgIC8vIEhhbmRzaGFrZSByZXF1ZXN0IGlzIGFsd2F5cyBKU09OXHJcbiAgICBIYW5kc2hha2VQcm90b2NvbC5wcm90b3R5cGUud3JpdGVIYW5kc2hha2VSZXF1ZXN0ID0gZnVuY3Rpb24gKGhhbmRzaGFrZVJlcXVlc3QpIHtcclxuICAgICAgICByZXR1cm4gVGV4dE1lc3NhZ2VGb3JtYXQud3JpdGUoSlNPTi5zdHJpbmdpZnkoaGFuZHNoYWtlUmVxdWVzdCkpO1xyXG4gICAgfTtcclxuICAgIEhhbmRzaGFrZVByb3RvY29sLnByb3RvdHlwZS5wYXJzZUhhbmRzaGFrZVJlc3BvbnNlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgcmVzcG9uc2VNZXNzYWdlO1xyXG4gICAgICAgIHZhciBtZXNzYWdlRGF0YTtcclxuICAgICAgICB2YXIgcmVtYWluaW5nRGF0YTtcclxuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgICAgIC8vIEZvcm1hdCBpcyBiaW5hcnkgYnV0IHN0aWxsIG5lZWQgdG8gcmVhZCBKU09OIHRleHQgZnJvbSBoYW5kc2hha2UgcmVzcG9uc2VcclxuICAgICAgICAgICAgdmFyIGJpbmFyeURhdGEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcclxuICAgICAgICAgICAgdmFyIHNlcGFyYXRvckluZGV4ID0gYmluYXJ5RGF0YS5pbmRleE9mKFRleHRNZXNzYWdlRm9ybWF0LlJlY29yZFNlcGFyYXRvckNvZGUpO1xyXG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9ySW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXNzYWdlIGlzIGluY29tcGxldGUuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnRlbnQgYmVmb3JlIHNlcGFyYXRvciBpcyBoYW5kc2hha2UgcmVzcG9uc2VcclxuICAgICAgICAgICAgLy8gb3B0aW9uYWwgY29udGVudCBhZnRlciBpcyBhZGRpdGlvbmFsIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZUxlbmd0aCA9IHNlcGFyYXRvckluZGV4ICsgMTtcclxuICAgICAgICAgICAgbWVzc2FnZURhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGJpbmFyeURhdGEuc2xpY2UoMCwgcmVzcG9uc2VMZW5ndGgpKTtcclxuICAgICAgICAgICAgcmVtYWluaW5nRGF0YSA9IChiaW5hcnlEYXRhLmJ5dGVMZW5ndGggPiByZXNwb25zZUxlbmd0aCkgPyBiaW5hcnlEYXRhLnNsaWNlKHJlc3BvbnNlTGVuZ3RoKS5idWZmZXIgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRleHREYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgdmFyIHNlcGFyYXRvckluZGV4ID0gdGV4dERhdGEuaW5kZXhPZihUZXh0TWVzc2FnZUZvcm1hdC5SZWNvcmRTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9ySW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXNzYWdlIGlzIGluY29tcGxldGUuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnRlbnQgYmVmb3JlIHNlcGFyYXRvciBpcyBoYW5kc2hha2UgcmVzcG9uc2VcclxuICAgICAgICAgICAgLy8gb3B0aW9uYWwgY29udGVudCBhZnRlciBpcyBhZGRpdGlvbmFsIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZUxlbmd0aCA9IHNlcGFyYXRvckluZGV4ICsgMTtcclxuICAgICAgICAgICAgbWVzc2FnZURhdGEgPSB0ZXh0RGF0YS5zdWJzdHJpbmcoMCwgcmVzcG9uc2VMZW5ndGgpO1xyXG4gICAgICAgICAgICByZW1haW5pbmdEYXRhID0gKHRleHREYXRhLmxlbmd0aCA+IHJlc3BvbnNlTGVuZ3RoKSA/IHRleHREYXRhLnN1YnN0cmluZyhyZXNwb25zZUxlbmd0aCkgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIHNob3VsZCBoYXZlIGp1c3QgdGhlIHNpbmdsZSBoYW5kc2hha2UgbWVzc2FnZVxyXG4gICAgICAgIHZhciBtZXNzYWdlcyA9IFRleHRNZXNzYWdlRm9ybWF0LnBhcnNlKG1lc3NhZ2VEYXRhKTtcclxuICAgICAgICByZXNwb25zZU1lc3NhZ2UgPSBKU09OLnBhcnNlKG1lc3NhZ2VzWzBdKTtcclxuICAgICAgICAvLyBtdWx0aXBsZSBtZXNzYWdlcyBjb3VsZCBoYXZlIGFycml2ZWQgd2l0aCBoYW5kc2hha2VcclxuICAgICAgICAvLyByZXR1cm4gYWRkaXRpb25hbCBkYXRhIHRvIGJlIHBhcnNlZCBhcyB1c3VhbCwgb3IgbnVsbCBpZiBhbGwgcGFyc2VkXHJcbiAgICAgICAgcmV0dXJuIFtyZW1haW5pbmdEYXRhLCByZXNwb25zZU1lc3NhZ2VdO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBIYW5kc2hha2VQcm90b2NvbDtcclxufSgpKTtcclxuZXhwb3J0IHsgSGFuZHNoYWtlUHJvdG9jb2wgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGFuZHNoYWtlUHJvdG9jb2wuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4vKiogQSBsb2dnZXIgdGhhdCBkb2VzIG5vdGhpbmcgd2hlbiBsb2cgbWVzc2FnZXMgYXJlIHNlbnQgdG8gaXQuICovXHJcbnZhciBOdWxsTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTnVsbExvZ2dlcigpIHtcclxuICAgIH1cclxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xyXG4gICAgTnVsbExvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxvZ0xldmVsLCBtZXNzYWdlKSB7XHJcbiAgICB9O1xyXG4gICAgLyoqIFRoZSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhlIHtAbGluayBOdWxsTG9nZ2VyfS4gKi9cclxuICAgIE51bGxMb2dnZXIuaW5zdGFuY2UgPSBuZXcgTnVsbExvZ2dlcigpO1xyXG4gICAgcmV0dXJuIE51bGxMb2dnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IE51bGxMb2dnZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TG9nZ2Vycy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vSUxvZ2dlclwiO1xyXG5pbXBvcnQgeyBOdWxsTG9nZ2VyIH0gZnJvbSBcIi4vTG9nZ2Vyc1wiO1xyXG52YXIgQXJnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXJnKCkge1xyXG4gICAgfVxyXG4gICAgQXJnLmlzUmVxdWlyZWQgPSBmdW5jdGlvbiAodmFsLCBuYW1lKSB7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgJ1wiICsgbmFtZSArIFwiJyBhcmd1bWVudCBpcyByZXF1aXJlZC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFyZy5pc0luID0gZnVuY3Rpb24gKHZhbCwgdmFsdWVzLCBuYW1lKSB7XHJcbiAgICAgICAgLy8gVHlwZVNjcmlwdCBlbnVtcyBoYXZlIGtleXMgZm9yICoqYm90aCoqIHRoZSBuYW1lIGFuZCB0aGUgdmFsdWUgb2YgZWFjaCBlbnVtIG1lbWJlciBvbiB0aGUgdHlwZSBpdHNlbGYuXHJcbiAgICAgICAgaWYgKCEodmFsIGluIHZhbHVlcykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBcIiArIG5hbWUgKyBcIiB2YWx1ZTogXCIgKyB2YWwgKyBcIi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBBcmc7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEFyZyB9O1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YURldGFpbChkYXRhLCBpbmNsdWRlQ29udGVudCkge1xyXG4gICAgdmFyIGxlbmd0aCA9IG51bGw7XHJcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgbGVuZ3RoID0gXCJCaW5hcnkgZGF0YSBvZiBsZW5ndGggXCIgKyBkYXRhLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgaWYgKGluY2x1ZGVDb250ZW50KSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCArPSBcIi4gQ29udGVudDogJ1wiICsgZm9ybWF0QXJyYXlCdWZmZXIoZGF0YSkgKyBcIidcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGxlbmd0aCA9IFwiU3RyaW5nIGRhdGEgb2YgbGVuZ3RoIFwiICsgZGF0YS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGluY2x1ZGVDb250ZW50KSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCArPSBcIi4gQ29udGVudDogJ1wiICsgZGF0YSArIFwiJy5cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGVuZ3RoO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBcnJheUJ1ZmZlcihkYXRhKSB7XHJcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xyXG4gICAgLy8gVWludDhBcnJheS5tYXAgb25seSBzdXBwb3J0cyByZXR1cm5pbmcgYW5vdGhlciBVaW50OEFycmF5P1xyXG4gICAgdmFyIHN0ciA9IFwiXCI7XHJcbiAgICB2aWV3LmZvckVhY2goZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHZhciBwYWQgPSBudW0gPCAxNiA/IFwiMFwiIDogXCJcIjtcclxuICAgICAgICBzdHIgKz0gXCIweFwiICsgcGFkICsgbnVtLnRvU3RyaW5nKDE2KSArIFwiIFwiO1xyXG4gICAgfSk7XHJcbiAgICAvLyBUcmltIG9mIHRyYWlsaW5nIHNwYWNlLlxyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc3RyLmxlbmd0aCAtIDEpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kTWVzc2FnZShsb2dnZXIsIHRyYW5zcG9ydE5hbWUsIGh0dHBDbGllbnQsIHVybCwgYWNjZXNzVG9rZW5GYWN0b3J5LCBjb250ZW50LCBsb2dNZXNzYWdlQ29udGVudCkge1xyXG4gICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlcnMsIHRva2VuLCByZXNwb25zZSwgX2E7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgYWNjZXNzVG9rZW5GYWN0b3J5KCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gKF9hID0ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYVtcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIHRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihcIiArIHRyYW5zcG9ydE5hbWUgKyBcIiB0cmFuc3BvcnQpIHNlbmRpbmcgZGF0YS4gXCIgKyBnZXREYXRhRGV0YWlsKGNvbnRlbnQsIGxvZ01lc3NhZ2VDb250ZW50KSArIFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBodHRwQ2xpZW50LnBvc3QodXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKFwiICsgdHJhbnNwb3J0TmFtZSArIFwiIHRyYW5zcG9ydCkgcmVxdWVzdCBjb21wbGV0ZS4gUmVzcG9uc2Ugc3RhdHVzOiBcIiArIHJlc3BvbnNlLnN0YXR1c0NvZGUgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9nZ2VyKGxvZ2dlcikge1xyXG4gICAgaWYgKGxvZ2dlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb25zb2xlTG9nZ2VyKExvZ0xldmVsLkluZm9ybWF0aW9uKTtcclxuICAgIH1cclxuICAgIGlmIChsb2dnZXIgPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gTnVsbExvZ2dlci5pbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGlmIChsb2dnZXIubG9nKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvZ2dlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgQ29uc29sZUxvZ2dlcihsb2dnZXIpO1xyXG59XHJcbnZhciBTdWJqZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3ViamVjdChjYW5jZWxDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5jYW5jZWxDYWxsYmFjayA9IGNhbmNlbENhbGxiYWNrO1xyXG4gICAgfVxyXG4gICAgU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMub2JzZXJ2ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLm9ic2VydmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMub2JzZXJ2ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpcHRpb24odGhpcywgb2JzZXJ2ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJqZWN0O1xyXG59KCkpO1xyXG5leHBvcnQgeyBTdWJqZWN0IH07XHJcbnZhciBTdWJqZWN0U3Vic2NyaXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmlwdGlvbihzdWJqZWN0LCBvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuc3ViamVjdCA9IHN1YmplY3Q7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgfVxyXG4gICAgU3ViamVjdFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnN1YmplY3Qub2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5vYnNlcnZlcik7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm9ic2VydmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdWJqZWN0Lm9ic2VydmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdWJqZWN0LmNhbmNlbENhbGxiYWNrKCkuY2F0Y2goZnVuY3Rpb24gKF8pIHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaXB0aW9uO1xyXG59KCkpO1xyXG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH07XHJcbnZhciBDb25zb2xlTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29uc29sZUxvZ2dlcihtaW5pbXVtTG9nTGV2ZWwpIHtcclxuICAgICAgICB0aGlzLm1pbmltdW1Mb2dMZXZlbCA9IG1pbmltdW1Mb2dMZXZlbDtcclxuICAgIH1cclxuICAgIENvbnNvbGVMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChsb2dMZXZlbCwgbWVzc2FnZSkge1xyXG4gICAgICAgIGlmIChsb2dMZXZlbCA+PSB0aGlzLm1pbmltdW1Mb2dMZXZlbCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGxvZ0xldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkNyaXRpY2FsOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5FcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKExvZ0xldmVsW2xvZ0xldmVsXSArIFwiOiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5XYXJuaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihMb2dMZXZlbFtsb2dMZXZlbF0gKyBcIjogXCIgKyBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuSW5mb3JtYXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKExvZ0xldmVsW2xvZ0xldmVsXSArIFwiOiBcIiArIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnIG9ubHkgZ29lcyB0byBhdHRhY2hlZCBkZWJ1Z2dlcnMgaW4gTm9kZSwgc28gd2UgdXNlIGNvbnNvbGUubG9nIGZvciBUcmFjZSBhbmQgRGVidWdcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhMb2dMZXZlbFtsb2dMZXZlbF0gKyBcIjogXCIgKyBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29uc29sZUxvZ2dlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgQ29uc29sZUxvZ2dlciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1VdGlscy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8vIFRoaXMgd2lsbCBiZSB0cmVhdGVkIGFzIGEgYml0IGZsYWcgaW4gdGhlIGZ1dHVyZSwgc28gd2Uga2VlcCBpdCB1c2luZyBwb3dlci1vZi10d28gdmFsdWVzLlxyXG4vKiogU3BlY2lmaWVzIGEgc3BlY2lmaWMgSFRUUCB0cmFuc3BvcnQgdHlwZS4gKi9cclxuZXhwb3J0IHZhciBIdHRwVHJhbnNwb3J0VHlwZTtcclxuKGZ1bmN0aW9uIChIdHRwVHJhbnNwb3J0VHlwZSkge1xyXG4gICAgLyoqIFNwZWNpZmllcyBubyB0cmFuc3BvcnQgcHJlZmVyZW5jZS4gKi9cclxuICAgIEh0dHBUcmFuc3BvcnRUeXBlW0h0dHBUcmFuc3BvcnRUeXBlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XHJcbiAgICAvKiogU3BlY2lmaWVzIHRoZSBXZWJTb2NrZXRzIHRyYW5zcG9ydC4gKi9cclxuICAgIEh0dHBUcmFuc3BvcnRUeXBlW0h0dHBUcmFuc3BvcnRUeXBlW1wiV2ViU29ja2V0c1wiXSA9IDFdID0gXCJXZWJTb2NrZXRzXCI7XHJcbiAgICAvKiogU3BlY2lmaWVzIHRoZSBTZXJ2ZXItU2VudCBFdmVudHMgdHJhbnNwb3J0LiAqL1xyXG4gICAgSHR0cFRyYW5zcG9ydFR5cGVbSHR0cFRyYW5zcG9ydFR5cGVbXCJTZXJ2ZXJTZW50RXZlbnRzXCJdID0gMl0gPSBcIlNlcnZlclNlbnRFdmVudHNcIjtcclxuICAgIC8qKiBTcGVjaWZpZXMgdGhlIExvbmcgUG9sbGluZyB0cmFuc3BvcnQuICovXHJcbiAgICBIdHRwVHJhbnNwb3J0VHlwZVtIdHRwVHJhbnNwb3J0VHlwZVtcIkxvbmdQb2xsaW5nXCJdID0gNF0gPSBcIkxvbmdQb2xsaW5nXCI7XHJcbn0pKEh0dHBUcmFuc3BvcnRUeXBlIHx8IChIdHRwVHJhbnNwb3J0VHlwZSA9IHt9KSk7XHJcbi8qKiBTcGVjaWZpZXMgdGhlIHRyYW5zZmVyIGZvcm1hdCBmb3IgYSBjb25uZWN0aW9uLiAqL1xyXG5leHBvcnQgdmFyIFRyYW5zZmVyRm9ybWF0O1xyXG4oZnVuY3Rpb24gKFRyYW5zZmVyRm9ybWF0KSB7XHJcbiAgICAvKiogU3BlY2lmaWVzIHRoYXQgb25seSB0ZXh0IGRhdGEgd2lsbCBiZSB0cmFuc21pdHRlZCBvdmVyIHRoZSBjb25uZWN0aW9uLiAqL1xyXG4gICAgVHJhbnNmZXJGb3JtYXRbVHJhbnNmZXJGb3JtYXRbXCJUZXh0XCJdID0gMV0gPSBcIlRleHRcIjtcclxuICAgIC8qKiBTcGVjaWZpZXMgdGhhdCBiaW5hcnkgZGF0YSB3aWxsIGJlIHRyYW5zbWl0dGVkIG92ZXIgdGhlIGNvbm5lY3Rpb24uICovXHJcbiAgICBUcmFuc2ZlckZvcm1hdFtUcmFuc2ZlckZvcm1hdFtcIkJpbmFyeVwiXSA9IDJdID0gXCJCaW5hcnlcIjtcclxufSkoVHJhbnNmZXJGb3JtYXQgfHwgKFRyYW5zZmVyRm9ybWF0ID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SVRyYW5zcG9ydC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEhhbmRzaGFrZVByb3RvY29sIH0gZnJvbSBcIi4vSGFuZHNoYWtlUHJvdG9jb2xcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9JSHViUHJvdG9jb2xcIjtcclxuaW1wb3J0IHsgTG9nTGV2ZWwgfSBmcm9tIFwiLi9JTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEFyZywgU3ViamVjdCB9IGZyb20gXCIuL1V0aWxzXCI7XHJcbnZhciBERUZBVUxUX1RJTUVPVVRfSU5fTVMgPSAzMCAqIDEwMDA7XHJcbi8qKiBSZXByZXNlbnRzIGEgY29ubmVjdGlvbiB0byBhIFNpZ25hbFIgSHViLiAqL1xyXG52YXIgSHViQ29ubmVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEh1YkNvbm5lY3Rpb24oY29ubmVjdGlvbiwgbG9nZ2VyLCBwcm90b2NvbCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgQXJnLmlzUmVxdWlyZWQoY29ubmVjdGlvbiwgXCJjb25uZWN0aW9uXCIpO1xyXG4gICAgICAgIEFyZy5pc1JlcXVpcmVkKGxvZ2dlciwgXCJsb2dnZXJcIik7XHJcbiAgICAgICAgQXJnLmlzUmVxdWlyZWQocHJvdG9jb2wsIFwicHJvdG9jb2xcIik7XHJcbiAgICAgICAgdGhpcy5zZXJ2ZXJUaW1lb3V0SW5NaWxsaXNlY29uZHMgPSBERUZBVUxUX1RJTUVPVVRfSU5fTVM7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XHJcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHByb3RvY29sO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5oYW5kc2hha2VQcm90b2NvbCA9IG5ldyBIYW5kc2hha2VQcm90b2NvbCgpO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbnJlY2VpdmUgPSBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMucHJvY2Vzc0luY29taW5nRGF0YShkYXRhKTsgfTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gX3RoaXMuY29ubmVjdGlvbkNsb3NlZChlcnJvcik7IH07XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcclxuICAgICAgICB0aGlzLm1ldGhvZHMgPSB7fTtcclxuICAgICAgICB0aGlzLmNsb3NlZENhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaWQgPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgLy8gVXNpbmcgYSBwdWJsaWMgc3RhdGljIGZhY3RvcnkgbWV0aG9kIG1lYW5zIHdlIGNhbiBoYXZlIGEgcHJpdmF0ZSBjb25zdHJ1Y3RvciBhbmQgYW4gX2ludGVybmFsX1xyXG4gICAgLy8gY3JlYXRlIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIGJ5IEh1YkNvbm5lY3Rpb25CdWlsZGVyLiBBbiBcImludGVybmFsXCIgY29uc3RydWN0b3Igd291bGQganVzdFxyXG4gICAgLy8gYmUgc3RyaXBwZWQgYXdheSBhbmQgdGhlICcuZC50cycgZmlsZSB3b3VsZCBoYXZlIG5vIGNvbnN0cnVjdG9yLCB3aGljaCBpcyBpbnRlcnByZXRlZCBhcyBhXHJcbiAgICAvLyBwdWJsaWMgcGFyYW1ldGVyLWxlc3MgY29uc3RydWN0b3IuXHJcbiAgICBIdWJDb25uZWN0aW9uLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb25uZWN0aW9uLCBsb2dnZXIsIHByb3RvY29sKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIdWJDb25uZWN0aW9uKGNvbm5lY3Rpb24sIGxvZ2dlciwgcHJvdG9jb2wpO1xyXG4gICAgfTtcclxuICAgIC8qKiBTdGFydHMgdGhlIGNvbm5lY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGVzdGFibGlzaGVkLCBvciByZWplY3RzIHdpdGggYW4gZXJyb3IuXHJcbiAgICAgKi9cclxuICAgIEh1YkNvbm5lY3Rpb24ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGFuZHNoYWtlUmVxdWVzdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kc2hha2VSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IHRoaXMucHJvdG9jb2wubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMucHJvdG9jb2wudmVyc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkRlYnVnLCBcIlN0YXJ0aW5nIEh1YkNvbm5lY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkSGFuZHNoYWtlUmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jb25uZWN0aW9uLnN0YXJ0KHRoaXMucHJvdG9jb2wudHJhbnNmZXJGb3JtYXQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkRlYnVnLCBcIlNlbmRpbmcgaGFuZHNoYWtlIHJlcXVlc3QuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNvbm5lY3Rpb24uc2VuZCh0aGlzLmhhbmRzaGFrZVByb3RvY29sLndyaXRlSGFuZHNoYWtlUmVxdWVzdChoYW5kc2hha2VSZXF1ZXN0KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuSW5mb3JtYXRpb24sIFwiVXNpbmcgSHViUHJvdG9jb2wgJ1wiICsgdGhpcy5wcm90b2NvbC5uYW1lICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmZW5zaXZlbHkgY2xlYW51cCB0aW1lb3V0IGluIGNhc2Ugd2UgcmVjZWl2ZSBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyIGJlZm9yZSB3ZSBmaW5pc2ggc3RhcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwVGltZW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVRpbWVvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogU3RvcHMgdGhlIGNvbm5lY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHRlcm1pbmF0ZWQsIG9yIHJlamVjdHMgd2l0aCBhbiBlcnJvci5cclxuICAgICAqL1xyXG4gICAgSHViQ29ubmVjdGlvbi5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuRGVidWcsIFwiU3RvcHBpbmcgSHViQ29ubmVjdGlvbi5cIik7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwVGltZW91dCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc3RvcCgpO1xyXG4gICAgfTtcclxuICAgIC8qKiBJbnZva2VzIGEgc3RyZWFtaW5nIGh1YiBtZXRob2Qgb24gdGhlIHNlcnZlciB1c2luZyB0aGUgc3BlY2lmaWVkIG5hbWUgYW5kIGFyZ3VtZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZXBhcmFtIFQgVGhlIHR5cGUgb2YgdGhlIGl0ZW1zIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgc2VydmVyIG1ldGhvZCB0byBpbnZva2UuXHJcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzIFRoZSBhcmd1bWVudHMgdXNlZCB0byBpbnZva2UgdGhlIHNlcnZlciBtZXRob2QuXHJcbiAgICAgKiBAcmV0dXJucyB7SVN0cmVhbVJlc3VsdDxUPn0gQW4gb2JqZWN0IHRoYXQgeWllbGRzIHJlc3VsdHMgZnJvbSB0aGUgc2VydmVyIGFzIHRoZXkgYXJlIHJlY2VpdmVkLlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW52b2NhdGlvbkRlc2NyaXB0b3IgPSB0aGlzLmNyZWF0ZVN0cmVhbUludm9jYXRpb24obWV0aG9kTmFtZSwgYXJncyk7XHJcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgU3ViamVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW5jZWxJbnZvY2F0aW9uID0gX3RoaXMuY3JlYXRlQ2FuY2VsSW52b2NhdGlvbihpbnZvY2F0aW9uRGVzY3JpcHRvci5pbnZvY2F0aW9uSWQpO1xyXG4gICAgICAgICAgICB2YXIgY2FuY2VsTWVzc2FnZSA9IF90aGlzLnByb3RvY29sLndyaXRlTWVzc2FnZShjYW5jZWxJbnZvY2F0aW9uKTtcclxuICAgICAgICAgICAgZGVsZXRlIF90aGlzLmNhbGxiYWNrc1tpbnZvY2F0aW9uRGVzY3JpcHRvci5pbnZvY2F0aW9uSWRdO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY29ubmVjdGlvbi5zZW5kKGNhbmNlbE1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW2ludm9jYXRpb25EZXNjcmlwdG9yLmludm9jYXRpb25JZF0gPSBmdW5jdGlvbiAoaW52b2NhdGlvbkV2ZW50LCBlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnZvY2F0aW9uRXZlbnQudHlwZSA9PT0gTWVzc2FnZVR5cGUuQ29tcGxldGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGludm9jYXRpb25FdmVudC5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IobmV3IEVycm9yKGludm9jYXRpb25FdmVudC5lcnJvcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KChpbnZvY2F0aW9uRXZlbnQuaXRlbSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMucHJvdG9jb2wud3JpdGVNZXNzYWdlKGludm9jYXRpb25EZXNjcmlwdG9yKTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZChtZXNzYWdlKVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlKTtcclxuICAgICAgICAgICAgZGVsZXRlIF90aGlzLmNhbGxiYWNrc1tpbnZvY2F0aW9uRGVzY3JpcHRvci5pbnZvY2F0aW9uSWRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xyXG4gICAgfTtcclxuICAgIC8qKiBJbnZva2VzIGEgaHViIG1ldGhvZCBvbiB0aGUgc2VydmVyIHVzaW5nIHRoZSBzcGVjaWZpZWQgbmFtZSBhbmQgYXJndW1lbnRzLiBEb2VzIG5vdCB3YWl0IGZvciBhIHJlc3BvbnNlIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBQcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIHJlc29sdmVzIHdoZW4gdGhlIGNsaWVudCBoYXMgc2VudCB0aGUgaW52b2NhdGlvbiB0byB0aGUgc2VydmVyLiBUaGUgc2VydmVyIG1heSBzdGlsbFxyXG4gICAgICogYmUgcHJvY2Vzc2luZyB0aGUgaW52b2NhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgc2VydmVyIG1ldGhvZCB0byBpbnZva2UuXHJcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBhcmdzIFRoZSBhcmd1bWVudHMgdXNlZCB0byBpbnZva2UgdGhlIHNlcnZlciBtZXRob2QuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgaW52b2NhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgc2VudCwgb3IgcmVqZWN0cyB3aXRoIGFuIGVycm9yLlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnZvY2F0aW9uRGVzY3JpcHRvciA9IHRoaXMuY3JlYXRlSW52b2NhdGlvbihtZXRob2ROYW1lLCBhcmdzLCB0cnVlKTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMucHJvdG9jb2wud3JpdGVNZXNzYWdlKGludm9jYXRpb25EZXNjcmlwdG9yKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmQobWVzc2FnZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEludm9rZXMgYSBodWIgbWV0aG9kIG9uIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIHNwZWNpZmllZCBuYW1lIGFuZCBhcmd1bWVudHMuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIFByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgcmVzb2x2ZXMgd2hlbiB0aGUgc2VydmVyIGluZGljYXRlcyBpdCBoYXMgZmluaXNoZWQgaW52b2tpbmcgdGhlIG1ldGhvZC4gV2hlbiB0aGUgcHJvbWlzZVxyXG4gICAgICogcmVzb2x2ZXMsIHRoZSBzZXJ2ZXIgaGFzIGZpbmlzaGVkIGludm9raW5nIHRoZSBtZXRob2QuIElmIHRoZSBzZXJ2ZXIgbWV0aG9kIHJldHVybnMgYSByZXN1bHQsIGl0IGlzIHByb2R1Y2VkIGFzIHRoZSByZXN1bHQgb2ZcclxuICAgICAqIHJlc29sdmluZyB0aGUgUHJvbWlzZS5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZXBhcmFtIFQgVGhlIGV4cGVjdGVkIHJldHVybiB0eXBlLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZlciBtZXRob2QgdG8gaW52b2tlLlxyXG4gICAgICogQHBhcmFtIHthbnlbXX0gYXJncyBUaGUgYXJndW1lbnRzIHVzZWQgdG8gaW52b2tlIHRoZSBzZXJ2ZXIgbWV0aG9kLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgc2VydmVyIG1ldGhvZCAoaWYgYW55KSwgb3IgcmVqZWN0cyB3aXRoIGFuIGVycm9yLlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW52b2NhdGlvbkRlc2NyaXB0b3IgPSB0aGlzLmNyZWF0ZUludm9jYXRpb24obWV0aG9kTmFtZSwgYXJncywgZmFsc2UpO1xyXG4gICAgICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jYWxsYmFja3NbaW52b2NhdGlvbkRlc2NyaXB0b3IuaW52b2NhdGlvbklkXSA9IGZ1bmN0aW9uIChpbnZvY2F0aW9uRXZlbnQsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbnZvY2F0aW9uRXZlbnQudHlwZSA9PT0gTWVzc2FnZVR5cGUuQ29tcGxldGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wbGV0aW9uTWVzc2FnZSA9IGludm9jYXRpb25FdmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGlvbk1lc3NhZ2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihjb21wbGV0aW9uTWVzc2FnZS5lcnJvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb21wbGV0aW9uTWVzc2FnZS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG1lc3NhZ2UgdHlwZTogXCIgKyBpbnZvY2F0aW9uRXZlbnQudHlwZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IF90aGlzLnByb3RvY29sLndyaXRlTWVzc2FnZShpbnZvY2F0aW9uRGVzY3JpcHRvcik7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbm5lY3Rpb24uc2VuZChtZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuY2FsbGJhY2tzW2ludm9jYXRpb25EZXNjcmlwdG9yLmludm9jYXRpb25JZF07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZWdpc3RlcnMgYSBoYW5kbGVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIGh1YiBtZXRob2Qgd2l0aCB0aGUgc3BlY2lmaWVkIG1ldGhvZCBuYW1lIGlzIGludm9rZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgVGhlIG5hbWUgb2YgdGhlIGh1YiBtZXRob2QgdG8gZGVmaW5lLlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV3TWV0aG9kIFRoZSBoYW5kbGVyIHRoYXQgd2lsbCBiZSByYWlzZWQgd2hlbiB0aGUgaHViIG1ldGhvZCBpcyBpbnZva2VkLlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBuZXdNZXRob2QpIHtcclxuICAgICAgICBpZiAoIW1ldGhvZE5hbWUgfHwgIW5ld01ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldGhvZHNbbWV0aG9kTmFtZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5tZXRob2RzW21ldGhvZE5hbWVdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByZXZlbnRpbmcgYWRkaW5nIHRoZSBzYW1lIGhhbmRsZXIgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAgICAgaWYgKHRoaXMubWV0aG9kc1ttZXRob2ROYW1lXS5pbmRleE9mKG5ld01ldGhvZCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tZXRob2RzW21ldGhvZE5hbWVdLnB1c2gobmV3TWV0aG9kKTtcclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgbWV0aG9kKSB7XHJcbiAgICAgICAgaWYgKCFtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWV0aG9kTmFtZSA9IG1ldGhvZE5hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLm1ldGhvZHNbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgaWYgKCFoYW5kbGVycykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZUlkeCA9IGhhbmRsZXJzLmluZGV4T2YobWV0aG9kKTtcclxuICAgICAgICAgICAgaWYgKHJlbW92ZUlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShyZW1vdmVJZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1ldGhvZHNbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1ldGhvZHNbbWV0aG9kTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBSZWdpc3RlcnMgYSBoYW5kbGVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBoYW5kbGVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkLiBPcHRpb25hbGx5IHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IGNvbnRhaW5pbmcgdGhlIGVycm9yIHRoYXQgY2F1c2VkIHRoZSBjb25uZWN0aW9uIHRvIGNsb3NlIChpZiBhbnkpLlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5wcm9jZXNzSW5jb21pbmdEYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmNsZWFudXBUaW1lb3V0KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVkSGFuZHNoYWtlUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGF0YSA9IHRoaXMucHJvY2Vzc0hhbmRzaGFrZVJlc3BvbnNlKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVkSGFuZHNoYWtlUmVzcG9uc2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEYXRhIG1heSBoYXZlIGFsbCBiZWVuIHJlYWQgd2hlbiBwcm9jZXNzaW5nIGhhbmRzaGFrZSByZXNwb25zZVxyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBtZXNzYWdlc1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLnByb3RvY29sLnBhcnNlTWVzc2FnZXMoZGF0YSwgdGhpcy5sb2dnZXIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1lc3NhZ2VzXzEgPSBtZXNzYWdlczsgX2kgPCBtZXNzYWdlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc18xW19pXTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5JbnZvY2F0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9rZUNsaWVudE1ldGhvZChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5TdHJlYW1JdGVtOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuQ29tcGxldGlvbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NbbWVzc2FnZS5pbnZvY2F0aW9uSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gTWVzc2FnZVR5cGUuQ29tcGxldGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1ttZXNzYWdlLmludm9jYXRpb25JZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLlBpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGNhcmUgYWJvdXQgcGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5DbG9zZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkluZm9ybWF0aW9uLCBcIkNsb3NlIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBzZXJ2ZXIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc3RvcChtZXNzYWdlLmVycm9yID8gbmV3IEVycm9yKFwiU2VydmVyIHJldHVybmVkIGFuIGVycm9yIG9uIGNsb3NlOiBcIiArIG1lc3NhZ2UuZXJyb3IpIDogbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5XYXJuaW5nLCBcIkludmFsaWQgbWVzc2FnZSB0eXBlOiBcIiArIG1lc3NhZ2UudHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlVGltZW91dCgpO1xyXG4gICAgfTtcclxuICAgIEh1YkNvbm5lY3Rpb24ucHJvdG90eXBlLnByb2Nlc3NIYW5kc2hha2VSZXNwb25zZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlTWVzc2FnZTtcclxuICAgICAgICB2YXIgcmVtYWluaW5nRGF0YTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBfYSA9IHRoaXMuaGFuZHNoYWtlUHJvdG9jb2wucGFyc2VIYW5kc2hha2VSZXNwb25zZShkYXRhKSwgcmVtYWluaW5nRGF0YSA9IF9hWzBdLCByZXNwb25zZU1lc3NhZ2UgPSBfYVsxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIkVycm9yIHBhcnNpbmcgaGFuZHNoYWtlIHJlc3BvbnNlOiBcIiArIGU7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5FcnJvciwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnN0b3AoZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlTWVzc2FnZS5lcnJvcikge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiU2VydmVyIHJldHVybmVkIGhhbmRzaGFrZSBlcnJvcjogXCIgKyByZXNwb25zZU1lc3NhZ2UuZXJyb3I7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5FcnJvciwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zdG9wKG5ldyBFcnJvcihtZXNzYWdlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuRGVidWcsIFwiU2VydmVyIGhhbmRzaGFrZSBjb21wbGV0ZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW1haW5pbmdEYXRhO1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5jb25maWd1cmVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24uZmVhdHVyZXMgfHwgIXRoaXMuY29ubmVjdGlvbi5mZWF0dXJlcy5pbmhlcmVudEtlZXBBbGl2ZSkge1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIHRpbWVvdXQgdGltZXJcclxuICAgICAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZXJ2ZXJUaW1lb3V0KCk7IH0sIHRoaXMuc2VydmVyVGltZW91dEluTWlsbGlzZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSHViQ29ubmVjdGlvbi5wcm90b3R5cGUuc2VydmVyVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUaGUgc2VydmVyIGhhc24ndCB0YWxrZWQgdG8gdXMgaW4gYSB3aGlsZS4gSXQgZG9lc24ndCBsaWtlIHVzIGFueW1vcmUgLi4uIDooXHJcbiAgICAgICAgLy8gVGVybWluYXRlIHRoZSBjb25uZWN0aW9uXHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnN0b3AobmV3IEVycm9yKFwiU2VydmVyIHRpbWVvdXQgZWxhcHNlZCB3aXRob3V0IHJlY2VpdmluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyLlwiKSk7XHJcbiAgICB9O1xyXG4gICAgSHViQ29ubmVjdGlvbi5wcm90b3R5cGUuaW52b2tlQ2xpZW50TWV0aG9kID0gZnVuY3Rpb24gKGludm9jYXRpb25NZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbWV0aG9kcyA9IHRoaXMubWV0aG9kc1tpbnZvY2F0aW9uTWVzc2FnZS50YXJnZXQudG9Mb3dlckNhc2UoKV07XHJcbiAgICAgICAgaWYgKG1ldGhvZHMpIHtcclxuICAgICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmFwcGx5KF90aGlzLCBpbnZvY2F0aW9uTWVzc2FnZS5hcmd1bWVudHMpOyB9KTtcclxuICAgICAgICAgICAgaWYgKGludm9jYXRpb25NZXNzYWdlLmludm9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBub3Qgc3VwcG9ydGVkIGluIHYxLiBTbyB3ZSByZXR1cm4gYW4gZXJyb3IgdG8gYXZvaWQgYmxvY2tpbmcgdGhlIHNlcnZlciB3YWl0aW5nIGZvciB0aGUgcmVzcG9uc2UuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiU2VydmVyIHJlcXVlc3RlZCBhIHJlc3BvbnNlLCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgdmVyc2lvbiBvZiB0aGUgY2xpZW50LlwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkVycm9yLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zdG9wKG5ldyBFcnJvcihtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5XYXJuaW5nLCBcIk5vIGNsaWVudCBtZXRob2Qgd2l0aCB0aGUgbmFtZSAnXCIgKyBpbnZvY2F0aW9uTWVzc2FnZS50YXJnZXQgKyBcIicgZm91bmQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5jb25uZWN0aW9uQ2xvc2VkID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5jYWxsYmFja3M7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcclxuICAgICAgICBPYmplY3Qua2V5cyhjYWxsYmFja3MpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tzW2tleV07XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgZXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihcIkludm9jYXRpb24gY2FuY2VsZWQgZHVlIHRvIGNvbm5lY3Rpb24gYmVpbmcgY2xvc2VkLlwiKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwVGltZW91dCgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VkQ2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuYXBwbHkoX3RoaXMsIFtlcnJvcl0pOyB9KTtcclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5jbGVhbnVwVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lb3V0SGFuZGxlKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBIdWJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVJbnZvY2F0aW9uID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGFyZ3MsIG5vbmJsb2NraW5nKSB7XHJcbiAgICAgICAgaWYgKG5vbmJsb2NraW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGFyZ3MsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IG1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5JbnZvY2F0aW9uLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5pZDtcclxuICAgICAgICAgICAgdGhpcy5pZCsrO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiBhcmdzLFxyXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbklkOiBpZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBtZXRob2ROYW1lLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuSW52b2NhdGlvbixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSHViQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlU3RyZWFtSW52b2NhdGlvbiA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgdmFyIGlkID0gdGhpcy5pZDtcclxuICAgICAgICB0aGlzLmlkKys7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXJndW1lbnRzOiBhcmdzLFxyXG4gICAgICAgICAgICBpbnZvY2F0aW9uSWQ6IGlkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHRhcmdldDogbWV0aG9kTmFtZSxcclxuICAgICAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuU3RyZWFtSW52b2NhdGlvbixcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEh1YkNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUNhbmNlbEludm9jYXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnZvY2F0aW9uSWQ6IGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5DYW5jZWxJbnZvY2F0aW9uLFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEh1YkNvbm5lY3Rpb247XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEh1YkNvbm5lY3Rpb24gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SHViQ29ubmVjdGlvbi5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8vIFJvdWdoIHBvbHlmaWxsIG9mIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BYm9ydENvbnRyb2xsZXJcclxuLy8gV2UgZG9uJ3QgYWN0dWFsbHkgZXZlciB1c2UgdGhlIEFQSSBiZWluZyBwb2x5ZmlsbGVkLCB3ZSBhbHdheXMgdXNlIHRoZSBwb2x5ZmlsbCBiZWNhdXNlXHJcbi8vIGl0J3MgYSB2ZXJ5IG5ldyBBUEkgcmlnaHQgbm93LlxyXG4vLyBOb3QgZXhwb3J0ZWQgZnJvbSBpbmRleC5cclxudmFyIEFib3J0Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFib3J0Q29udHJvbGxlcigpIHtcclxuICAgICAgICB0aGlzLmlzQWJvcnRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgQWJvcnRDb250cm9sbGVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBYm9ydGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbmFib3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFib3J0Q29udHJvbGxlci5wcm90b3R5cGUsIFwic2lnbmFsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWJvcnRDb250cm9sbGVyLnByb3RvdHlwZSwgXCJhYm9ydGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNBYm9ydGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEFib3J0Q29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgQWJvcnRDb250cm9sbGVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFib3J0Q29udHJvbGxlci5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEFib3J0Q29udHJvbGxlciB9IGZyb20gXCIuL0Fib3J0Q29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IsIFRpbWVvdXRFcnJvciB9IGZyb20gXCIuL0Vycm9yc1wiO1xyXG5pbXBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0lMb2dnZXJcIjtcclxuaW1wb3J0IHsgVHJhbnNmZXJGb3JtYXQgfSBmcm9tIFwiLi9JVHJhbnNwb3J0XCI7XHJcbmltcG9ydCB7IEFyZywgZ2V0RGF0YURldGFpbCwgc2VuZE1lc3NhZ2UgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG52YXIgU0hVVERPV05fVElNRU9VVCA9IDUgKiAxMDAwO1xyXG4vLyBOb3QgZXhwb3J0ZWQgZnJvbSAnaW5kZXgnLCB0aGlzIHR5cGUgaXMgaW50ZXJuYWwuXHJcbnZhciBMb25nUG9sbGluZ1RyYW5zcG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvbmdQb2xsaW5nVHJhbnNwb3J0KGh0dHBDbGllbnQsIGFjY2Vzc1Rva2VuRmFjdG9yeSwgbG9nZ2VyLCBsb2dNZXNzYWdlQ29udGVudCwgc2h1dGRvd25UaW1lb3V0KSB7XHJcbiAgICAgICAgdGhpcy5odHRwQ2xpZW50ID0gaHR0cENsaWVudDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSA9IGFjY2Vzc1Rva2VuRmFjdG9yeSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSk7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XHJcbiAgICAgICAgdGhpcy5wb2xsQWJvcnQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlQ29udGVudCA9IGxvZ01lc3NhZ2VDb250ZW50O1xyXG4gICAgICAgIHRoaXMuc2h1dGRvd25UaW1lb3V0ID0gc2h1dGRvd25UaW1lb3V0IHx8IFNIVVRET1dOX1RJTUVPVVQ7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9uZ1BvbGxpbmdUcmFuc3BvcnQucHJvdG90eXBlLCBcInBvbGxBYm9ydGVkXCIsIHtcclxuICAgICAgICAvLyBUaGlzIGlzIGFuIGludGVybmFsIHR5cGUsIG5vdCBleHBvcnRlZCBmcm9tICdpbmRleCcgc28gdGhpcyBpcyByZWFsbHkganVzdCBpbnRlcm5hbC5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9sbEFib3J0LmFib3J0ZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBMb25nUG9sbGluZ1RyYW5zcG9ydC5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICh1cmwsIHRyYW5zZmVyRm9ybWF0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2xsT3B0aW9ucywgdG9rZW4sIGNsb3NlRXJyb3IsIHBvbGxVcmwsIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHVybCwgXCJ1cmxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHRyYW5zZmVyRm9ybWF0LCBcInRyYW5zZmVyRm9ybWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcmcuaXNJbih0cmFuc2ZlckZvcm1hdCwgVHJhbnNmZXJGb3JtYXQsIFwidHJhbnNmZXJGb3JtYXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgQ29ubmVjdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZmVyRm9ybWF0ID09PSBUcmFuc2ZlckZvcm1hdC5CaW5hcnkgJiYgKHR5cGVvZiBuZXcgWE1MSHR0cFJlcXVlc3QoKS5yZXNwb25zZVR5cGUgIT09IFwic3RyaW5nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgd29yayBpZiB3ZSBmaXg6IGh0dHBzOi8vZ2l0aHViLmNvbS9hc3BuZXQvU2lnbmFsUi9pc3N1ZXMvNzQyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaW5hcnkgcHJvdG9jb2xzIG92ZXIgWG1sSHR0cFJlcXVlc3Qgbm90IGltcGxlbWVudGluZyBhZHZhbmNlZCBmZWF0dXJlcyBhcmUgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9sbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydFNpZ25hbDogdGhpcy5wb2xsQWJvcnQuc2lnbmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA5MDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZmVyRm9ybWF0ID09PSBUcmFuc2ZlckZvcm1hdC5CaW5hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxPcHRpb25zLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUhlYWRlclRva2VuKHBvbGxPcHRpb25zLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxVcmwgPSB1cmwgKyBcIiZfPVwiICsgRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihMb25nUG9sbGluZyB0cmFuc3BvcnQpIHBvbGxpbmc6IFwiICsgcG9sbFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cENsaWVudC5nZXQocG9sbFVybCwgcG9sbE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAhPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuRXJyb3IsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgVW5leHBlY3RlZCByZXNwb25zZSBjb2RlOiBcIiArIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBydW5uaW5nIGFzIGZhbHNlIHNvIHRoYXQgdGhlIHBvbGwgaW1tZWRpYXRlbHkgZW5kcyBhbmQgcnVucyB0aGUgY2xvc2UgbG9naWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRXJyb3IgPSBuZXcgSHR0cEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQsIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9sbCh0aGlzLnVybCwgcG9sbE9wdGlvbnMsIGNsb3NlRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMb25nUG9sbGluZ1RyYW5zcG9ydC5wcm90b3R5cGUudXBkYXRlSGVhZGVyVG9rZW4gPSBmdW5jdGlvbiAocmVxdWVzdCwgdG9rZW4pIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIHRva2VuO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgICAgIGlmIChyZXF1ZXN0LmhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdKSB7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgICAgICAgICBkZWxldGUgcmVxdWVzdC5oZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTG9uZ1BvbGxpbmdUcmFuc3BvcnQucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbiAodXJsLCBwb2xsT3B0aW9ucywgY2xvc2VFcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4sIHBvbGxVcmwsIHJlc3BvbnNlLCBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAsIDgsIDldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUhlYWRlclRva2VuKHBvbGxPcHRpb25zLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMywgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxVcmwgPSB1cmwgKyBcIiZfPVwiICsgRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihMb25nUG9sbGluZyB0cmFuc3BvcnQpIHBvbGxpbmc6IFwiICsgcG9sbFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cENsaWVudC5nZXQocG9sbFVybCwgcG9sbE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuSW5mb3JtYXRpb24sIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgUG9sbCB0ZXJtaW5hdGVkIGJ5IHNlcnZlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkVycm9yLCBcIihMb25nUG9sbGluZyB0cmFuc3BvcnQpIFVuZXhwZWN0ZWQgcmVzcG9uc2UgY29kZTogXCIgKyByZXNwb25zZS5zdGF0dXNDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgc3RhdHVzIGNvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRXJyb3IgPSBuZXcgSHR0cEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQsIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgZGF0YSByZWNlaXZlZC4gXCIgKyBnZXREYXRhRGV0YWlsKHJlc3BvbnNlLmNvbnRlbnQsIHRoaXMubG9nTWVzc2FnZUNvbnRlbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vbnJlY2VpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbnJlY2VpdmUocmVzcG9uc2UuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhbm90aGVyIHdheSB0aW1lb3V0IG1hbmlmZXN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5UcmFjZSwgXCIoTG9uZ1BvbGxpbmcgdHJhbnNwb3J0KSBQb2xsIHRpbWVkIG91dCwgcmVpc3N1aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvZyBidXQgZGlzcmVnYXJkIGVycm9ycyB0aGF0IG9jY3VyIGFmdGVyIHdlIHdlcmUgc3RvcHBlZCBieSBERUxFVEVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5UcmFjZSwgXCIoTG9uZ1BvbGxpbmcgdHJhbnNwb3J0KSBQb2xsIGVycm9yZWQgYWZ0ZXIgc2h1dGRvd246IFwiICsgZV8xLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVfMSBpbnN0YW5jZW9mIFRpbWVvdXRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB0aW1lb3V0cyBhbmQgcmVpc3N1ZSB0aGUgcG9sbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgUG9sbCB0aW1lZCBvdXQsIHJlaXNzdWluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbG9zZSB0aGUgY29ubmVjdGlvbiB3aXRoIHRoZSBlcnJvciBhcyB0aGUgcmVzdWx0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRXJyb3IgPSBlXzE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5kaWNhdGUgdGhhdCB3ZSd2ZSBzdG9wcGVkIHNvIHRoZSBzaHV0ZG93biB0aW1lciBkb2Vzbid0IGdldCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgc2h1dGRvd24gdGltZXIgaWYgaXQgd2FzIHJlZ2lzdGVyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1dGRvd25UaW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2h1dGRvd25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZSBvdXIgb25jbG9zZWQgZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25jbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihMb25nUG9sbGluZyB0cmFuc3BvcnQpIEZpcmluZyBvbmNsb3NlIGV2ZW50LiBFcnJvcjogXCIgKyAoY2xvc2VFcnJvciB8fCBcIjx1bmRlZmluZWQ+XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25jbG9zZShjbG9zZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgVHJhbnNwb3J0IGZpbmlzaGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9uZ1BvbGxpbmdUcmFuc3BvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkNhbm5vdCBzZW5kIHVudGlsIHRoZSB0cmFuc3BvcnQgaXMgY29ubmVjdGVkXCIpKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2VuZE1lc3NhZ2UodGhpcy5sb2dnZXIsIFwiTG9uZ1BvbGxpbmdcIiwgdGhpcy5odHRwQ2xpZW50LCB0aGlzLnVybCwgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnksIGRhdGEsIHRoaXMubG9nTWVzc2FnZUNvbnRlbnQpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9uZ1BvbGxpbmdUcmFuc3BvcnQucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBkZWxldGVPcHRpb25zLCB0b2tlbiwgcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAsIDMsIDRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5UcmFjZSwgXCIoTG9uZ1BvbGxpbmcgdHJhbnNwb3J0KSBzZW5kaW5nIERFTEVURSByZXF1ZXN0IHRvIFwiICsgdGhpcy51cmwgKyBcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIZWFkZXJUb2tlbihkZWxldGVPcHRpb25zLCB0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cENsaWVudC5kZWxldGUodGhpcy51cmwsIGRlbGV0ZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKExvbmdQb2xsaW5nIHRyYW5zcG9ydCkgREVMRVRFIHJlcXVlc3QgYWNjZXB0ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSBwb2xsIGFmdGVyIHRoZSBzaHV0ZG93biB0aW1lb3V0IGlmIHRoZSBzZXJ2ZXIgZG9lc24ndCBzdG9wIHRoZSBwb2xsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaHV0ZG93blRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5XYXJuaW5nLCBcIihMb25nUG9sbGluZyB0cmFuc3BvcnQpIHNlcnZlciBkaWQgbm90IHRlcm1pbmF0ZSBhZnRlciBERUxFVEUgcmVxdWVzdCwgY2FuY2VsaW5nIHBvbGwuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFib3J0IGFueSBvdXRzdGFuZGluZyBwb2xsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9sbEFib3J0LmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnNodXRkb3duVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvbmdQb2xsaW5nVHJhbnNwb3J0O1xyXG59KCkpO1xyXG5leHBvcnQgeyBMb25nUG9sbGluZ1RyYW5zcG9ydCB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Mb25nUG9sbGluZ1RyYW5zcG9ydC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vSUxvZ2dlclwiO1xyXG5pbXBvcnQgeyBUcmFuc2ZlckZvcm1hdCB9IGZyb20gXCIuL0lUcmFuc3BvcnRcIjtcclxuaW1wb3J0IHsgQXJnLCBnZXREYXRhRGV0YWlsLCBzZW5kTWVzc2FnZSB9IGZyb20gXCIuL1V0aWxzXCI7XHJcbnZhciBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydChodHRwQ2xpZW50LCBhY2Nlc3NUb2tlbkZhY3RvcnksIGxvZ2dlciwgbG9nTWVzc2FnZUNvbnRlbnQpIHtcclxuICAgICAgICB0aGlzLmh0dHBDbGllbnQgPSBodHRwQ2xpZW50O1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW5GYWN0b3J5ID0gYWNjZXNzVG9rZW5GYWN0b3J5IHx8IChmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9KTtcclxuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcclxuICAgICAgICB0aGlzLmxvZ01lc3NhZ2VDb250ZW50ID0gbG9nTWVzc2FnZUNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKHVybCwgdHJhbnNmZXJGb3JtYXQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHRva2VuO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHVybCwgXCJ1cmxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHRyYW5zZmVyRm9ybWF0LCBcInRyYW5zZmVyRm9ybWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcmcuaXNJbih0cmFuc2ZlckZvcm1hdCwgVHJhbnNmZXJGb3JtYXQsIFwidHJhbnNmZXJGb3JtYXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKEV2ZW50U291cmNlKSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0V2ZW50U291cmNlJyBpcyBub3Qgc3VwcG9ydGVkIGluIHlvdXIgZW52aXJvbm1lbnQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5UcmFjZSwgXCIoU1NFIHRyYW5zcG9ydCkgQ29ubmVjdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKFwiP1wiKSA8IDAgPyBcIj9cIiA6IFwiJlwiKSArIChcImFjY2Vzc190b2tlbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmZXJGb3JtYXQgIT09IFRyYW5zZmVyRm9ybWF0LlRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlRoZSBTZXJ2ZXItU2VudCBFdmVudHMgdHJhbnNwb3J0IG9ubHkgc3VwcG9ydHMgdGhlICdUZXh0JyB0cmFuc2ZlciBmb3JtYXRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodXJsLCB7IHdpdGhDcmVkZW50aWFsczogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9ucmVjZWl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKFNTRSB0cmFuc3BvcnQpIGRhdGEgcmVjZWl2ZWQuIFwiICsgZ2V0RGF0YURldGFpbChlLmRhdGEsIF90aGlzLmxvZ01lc3NhZ2VDb250ZW50KSArIFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25yZWNlaXZlKGUuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub25jbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25jbG9zZShlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTb3VyY2Uub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoZS5tZXNzYWdlIHx8IFwiRXJyb3Igb2NjdXJyZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTb3VyY2Uub25vcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5JbmZvcm1hdGlvbiwgXCJTU0UgY29ubmVjdGVkIHRvIFwiICsgX3RoaXMudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV2ZW50U291cmNlID0gZXZlbnRTb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZXZlbnRTb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQ2Fubm90IHNlbmQgdW50aWwgdGhlIHRyYW5zcG9ydCBpcyBjb25uZWN0ZWRcIikpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBzZW5kTWVzc2FnZSh0aGlzLmxvZ2dlciwgXCJTU0VcIiwgdGhpcy5odHRwQ2xpZW50LCB0aGlzLnVybCwgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnksIGRhdGEsIHRoaXMubG9nTWVzc2FnZUNvbnRlbnQpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclNlbnRFdmVudHNUcmFuc3BvcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudFNvdXJjZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50U291cmNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTb3VyY2UgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbmNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uY2xvc2UoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlcnZlclNlbnRFdmVudHNUcmFuc3BvcnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFNlcnZlclNlbnRFdmVudHNUcmFuc3BvcnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vSUxvZ2dlclwiO1xyXG5pbXBvcnQgeyBUcmFuc2ZlckZvcm1hdCB9IGZyb20gXCIuL0lUcmFuc3BvcnRcIjtcclxuaW1wb3J0IHsgQXJnLCBnZXREYXRhRGV0YWlsIH0gZnJvbSBcIi4vVXRpbHNcIjtcclxudmFyIFdlYlNvY2tldFRyYW5zcG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdlYlNvY2tldFRyYW5zcG9ydChhY2Nlc3NUb2tlbkZhY3RvcnksIGxvZ2dlciwgbG9nTWVzc2FnZUNvbnRlbnQpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSA9IGFjY2Vzc1Rva2VuRmFjdG9yeSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSk7XHJcbiAgICAgICAgdGhpcy5sb2dNZXNzYWdlQ29udGVudCA9IGxvZ01lc3NhZ2VDb250ZW50O1xyXG4gICAgfVxyXG4gICAgV2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKHVybCwgdHJhbnNmZXJGb3JtYXQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHRva2VuO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHVybCwgXCJ1cmxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFyZy5pc1JlcXVpcmVkKHRyYW5zZmVyRm9ybWF0LCBcInRyYW5zZmVyRm9ybWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcmcuaXNJbih0cmFuc2ZlckZvcm1hdCwgVHJhbnNmZXJGb3JtYXQsIFwidHJhbnNmZXJGb3JtYXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKFdlYlNvY2tldCkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidXZWJTb2NrZXQnIGlzIG5vdCBzdXBwb3J0ZWQgaW4geW91ciBlbnZpcm9ubWVudC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihXZWJTb2NrZXRzIHRyYW5zcG9ydCkgQ29ubmVjdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKFwiP1wiKSA8IDAgPyBcIj9cIiA6IFwiJlwiKSArIChcImFjY2Vzc190b2tlbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0b2tlbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoL15odHRwLywgXCJ3c1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2ViU29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2ZlckZvcm1hdCA9PT0gVHJhbnNmZXJGb3JtYXQuQmluYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlNvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWJTb2NrZXQub25vcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuSW5mb3JtYXRpb24sIFwiV2ViU29ja2V0IGNvbm5lY3RlZCB0byBcIiArIHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLndlYlNvY2tldCA9IHdlYlNvY2tldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViU29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50LmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihXZWJTb2NrZXRzIHRyYW5zcG9ydCkgZGF0YSByZWNlaXZlZC4gXCIgKyBnZXREYXRhRGV0YWlsKG1lc3NhZ2UuZGF0YSwgX3RoaXMubG9nTWVzc2FnZUNvbnRlbnQpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub25yZWNlaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbnJlY2VpdmUobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViU29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2ViU29ja2V0IHdpbGwgYmUgbnVsbCBpZiB0aGUgdHJhbnNwb3J0IGRpZCBub3Qgc3RhcnQgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuVHJhY2UsIFwiKFdlYlNvY2tldHMgdHJhbnNwb3J0KSBzb2NrZXQgY2xvc2VkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9uY2xvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53YXNDbGVhbiA9PT0gZmFsc2UgfHwgZXZlbnQuY29kZSAhPT0gMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uY2xvc2UobmV3IEVycm9yKFwiV2Vic29ja2V0IGNsb3NlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGV2ZW50LmNvZGUgKyBcIiAoXCIgKyBldmVudC5yZWFzb24gKyBcIilcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy53ZWJTb2NrZXQgJiYgdGhpcy53ZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLlRyYWNlLCBcIihXZWJTb2NrZXRzIHRyYW5zcG9ydCkgc2VuZGluZyBkYXRhLiBcIiArIGdldERhdGFEZXRhaWwoZGF0YSwgdGhpcy5sb2dNZXNzYWdlQ29udGVudCkgKyBcIi5cIik7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiV2ViU29ja2V0IGlzIG5vdCBpbiB0aGUgT1BFTiBzdGF0ZVwiKTtcclxuICAgIH07XHJcbiAgICBXZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2ViU29ja2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJTb2NrZXRUcmFuc3BvcnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFdlYlNvY2tldFRyYW5zcG9ydCB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWJTb2NrZXRUcmFuc3BvcnQuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBEZWZhdWx0SHR0cENsaWVudCB9IGZyb20gXCIuL0h0dHBDbGllbnRcIjtcclxuaW1wb3J0IHsgTG9nTGV2ZWwgfSBmcm9tIFwiLi9JTG9nZ2VyXCI7XHJcbmltcG9ydCB7IEh0dHBUcmFuc3BvcnRUeXBlLCBUcmFuc2ZlckZvcm1hdCB9IGZyb20gXCIuL0lUcmFuc3BvcnRcIjtcclxuaW1wb3J0IHsgTG9uZ1BvbGxpbmdUcmFuc3BvcnQgfSBmcm9tIFwiLi9Mb25nUG9sbGluZ1RyYW5zcG9ydFwiO1xyXG5pbXBvcnQgeyBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0IH0gZnJvbSBcIi4vU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydFwiO1xyXG5pbXBvcnQgeyBBcmcsIGNyZWF0ZUxvZ2dlciB9IGZyb20gXCIuL1V0aWxzXCI7XHJcbmltcG9ydCB7IFdlYlNvY2tldFRyYW5zcG9ydCB9IGZyb20gXCIuL1dlYlNvY2tldFRyYW5zcG9ydFwiO1xyXG52YXIgTUFYX1JFRElSRUNUUyA9IDEwMDtcclxudmFyIEh0dHBDb25uZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSHR0cENvbm5lY3Rpb24odXJsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgICAgICB0aGlzLmZlYXR1cmVzID0ge307XHJcbiAgICAgICAgQXJnLmlzUmVxdWlyZWQodXJsLCBcInVybFwiKTtcclxuICAgICAgICB0aGlzLmxvZ2dlciA9IGNyZWF0ZUxvZ2dlcihvcHRpb25zLmxvZ2dlcik7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gdGhpcy5yZXNvbHZlVXJsKHVybCk7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5hY2Nlc3NUb2tlbkZhY3RvcnkgPSBvcHRpb25zLmFjY2Vzc1Rva2VuRmFjdG9yeSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSk7XHJcbiAgICAgICAgb3B0aW9ucy5sb2dNZXNzYWdlQ29udGVudCA9IG9wdGlvbnMubG9nTWVzc2FnZUNvbnRlbnQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5odHRwQ2xpZW50ID0gb3B0aW9ucy5odHRwQ2xpZW50IHx8IG5ldyBEZWZhdWx0SHR0cENsaWVudCh0aGlzLmxvZ2dlcik7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAyIC8qIERpc2Nvbm5lY3RlZCAqLztcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG4gICAgSHR0cENvbm5lY3Rpb24ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKHRyYW5zZmVyRm9ybWF0KSB7XHJcbiAgICAgICAgdHJhbnNmZXJGb3JtYXQgPSB0cmFuc2ZlckZvcm1hdCB8fCBUcmFuc2ZlckZvcm1hdC5CaW5hcnk7XHJcbiAgICAgICAgQXJnLmlzSW4odHJhbnNmZXJGb3JtYXQsIFRyYW5zZmVyRm9ybWF0LCBcInRyYW5zZmVyRm9ybWF0XCIpO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5EZWJ1ZywgXCJTdGFydGluZyBjb25uZWN0aW9uIHdpdGggdHJhbnNmZXIgZm9ybWF0ICdcIiArIFRyYW5zZmVyRm9ybWF0W3RyYW5zZmVyRm9ybWF0XSArIFwiJy5cIik7XHJcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlICE9PSAyIC8qIERpc2Nvbm5lY3RlZCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiQ2Fubm90IHN0YXJ0IGEgY29ubmVjdGlvbiB0aGF0IGlzIG5vdCBpbiB0aGUgJ0Rpc2Nvbm5lY3RlZCcgc3RhdGUuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAwIC8qIENvbm5lY3RpbmcgKi87XHJcbiAgICAgICAgdGhpcy5zdGFydFByb21pc2UgPSB0aGlzLnN0YXJ0SW50ZXJuYWwodHJhbnNmZXJGb3JtYXQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0UHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlICE9PSAxIC8qIENvbm5lY3RlZCAqLykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2VuZCBkYXRhIGlmIHRoZSBjb25uZWN0aW9uIGlzIG5vdCBpbiB0aGUgJ0Nvbm5lY3RlZCcgU3RhdGUuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc2VuZChkYXRhKTtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gMiAvKiBEaXNjb25uZWN0ZWQgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3RhcnRQcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRyYW5zcG9ydCkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcEVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudHJhbnNwb3J0LnN0b3AoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuc3RhcnRJbnRlcm5hbCA9IGZ1bmN0aW9uICh0cmFuc2ZlckZvcm1hdCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgdXJsLCBuZWdvdGlhdGVSZXNwb25zZSwgcmVkaXJlY3RzLCBfbG9vcF8xLCB0aGlzXzEsIHN0YXRlXzEsIGVfMjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLmJhc2VVcmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW5GYWN0b3J5ID0gdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuRmFjdG9yeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAxMiwgLCAxM10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5za2lwTmVnb3RpYXRpb24pIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm9wdGlvbnMudHJhbnNwb3J0ID09PSBIdHRwVHJhbnNwb3J0VHlwZS5XZWJTb2NrZXRzKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gYWRkIGEgY29ubmVjdGlvbiBJRCBpbiB0aGlzIGNhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQgPSB0aGlzLmNvbnN0cnVjdFRyYW5zcG9ydChIdHRwVHJhbnNwb3J0VHlwZS5XZWJTb2NrZXRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIGp1c3QgY2FsbCBjb25uZWN0IGRpcmVjdGx5IGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZmFsbGJhY2sgb3IgbmVnb3RpYXRlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50cmFuc3BvcnQuY29ubmVjdCh1cmwsIHRyYW5zZmVyRm9ybWF0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQganVzdCBjYWxsIGNvbm5lY3QgZGlyZWN0bHkgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBmYWxsYmFjayBvciBuZWdvdGlhdGUgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogdGhyb3cgRXJyb3IoXCJOZWdvdGlhdGlvbiBjYW4gb25seSBiZSBza2lwcGVkIHdoZW4gdXNpbmcgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgZGlyZWN0bHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFszIC8qYnJlYWsqLywgMTFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVnb3RpYXRlUmVzcG9uc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2Vzc1Rva2VuXzE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpc18xLmdldE5lZ290aWF0aW9uUmVzcG9uc2UodXJsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZ290aWF0ZVJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgdHJpZXMgdG8gc3RvcCB0aGUgY29ubmVjdGlvbiB3aGVuIGl0IGlzIGJlaW5nIHN0YXJ0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzXzEuY29ubmVjdGlvblN0YXRlID09PSAyIC8qIERpc2Nvbm5lY3RlZCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB7IHZhbHVlOiB2b2lkIDAgfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVnb3RpYXRlUmVzcG9uc2UudXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmVnb3RpYXRlUmVzcG9uc2UudXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZ290aWF0ZVJlc3BvbnNlLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5fMSA9IG5lZ290aWF0ZVJlc3BvbnNlLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5hY2Nlc3NUb2tlbkZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBhY2Nlc3NUb2tlbl8xOyB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbNSAvKnlpZWxkKiovLCBfbG9vcF8xKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN0YXRlXzEudmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVnb3RpYXRlUmVzcG9uc2UudXJsICYmIHJlZGlyZWN0cyA8IE1BWF9SRURJUkVDVFMpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVkaXJlY3RzID09PSBNQVhfUkVESVJFQ1RTICYmIG5lZ290aWF0ZVJlc3BvbnNlLnVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJOZWdvdGlhdGUgcmVkaXJlY3Rpb24gbGltaXQgZXhjZWVkZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY3JlYXRlVHJhbnNwb3J0KHVybCwgdGhpcy5vcHRpb25zLnRyYW5zcG9ydCwgbmVnb3RpYXRlUmVzcG9uc2UsIHRyYW5zZmVyRm9ybWF0KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDExO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydCBpbnN0YW5jZW9mIExvbmdQb2xsaW5nVHJhbnNwb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzLmluaGVyZW50S2VlcEFsaXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5vbnJlY2VpdmUgPSB0aGlzLm9ucmVjZWl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQub25jbG9zZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5zdG9wQ29ubmVjdGlvbihlKTsgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBjaGFuZ2UgdGhlIHN0YXRlIGlmIHdlIHdlcmUgY29ubmVjdGluZyB0byBub3Qgb3ZlcndyaXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzdGF0ZSBpZiB0aGUgY29ubmVjdGlvbiBpcyBhbHJlYWR5IG1hcmtlZCBhcyBEaXNjb25uZWN0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZSgwIC8qIENvbm5lY3RpbmcgKi8sIDEgLyogQ29ubmVjdGVkICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkVycm9yLCBcIkZhaWxlZCB0byBzdGFydCB0aGUgY29ubmVjdGlvbjogXCIgKyBlXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IDIgLyogRGlzY29ubmVjdGVkICovO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVfMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEh0dHBDb25uZWN0aW9uLnByb3RvdHlwZS5nZXROZWdvdGlhdGlvblJlc3BvbnNlID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW4sIGhlYWRlcnMsIG5lZ290aWF0ZVVybCwgcmVzcG9uc2UsIGVfMywgX2E7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5hY2Nlc3NUb2tlbkZhY3RvcnkoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gKF9hID0ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FbXCJBdXRob3JpemF0aW9uXCJdID0gXCJCZWFyZXIgXCIgKyB0b2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVnb3RpYXRlVXJsID0gdGhpcy5yZXNvbHZlTmVnb3RpYXRlVXJsKHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5EZWJ1ZywgXCJTZW5kaW5nIG5lZ290aWF0aW9uIHJlcXVlc3Q6IFwiICsgbmVnb3RpYXRlVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsyLCA0LCAsIDVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwQ2xpZW50LnBvc3QobmVnb3RpYXRlVXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlICE9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiVW5leHBlY3RlZCBzdGF0dXMgY29kZSByZXR1cm5lZCBmcm9tIG5lZ290aWF0ZSBcIiArIHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBKU09OLnBhcnNlKHJlc3BvbnNlLmNvbnRlbnQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMyA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkVycm9yLCBcIkZhaWxlZCB0byBjb21wbGV0ZSBuZWdvdGlhdGlvbiB3aXRoIHRoZSBzZXJ2ZXI6IFwiICsgZV8zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZV8zO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQ29ubmVjdFVybCA9IGZ1bmN0aW9uICh1cmwsIGNvbm5lY3Rpb25JZCkge1xyXG4gICAgICAgIHJldHVybiB1cmwgKyAodXJsLmluZGV4T2YoXCI/XCIpID09PSAtMSA/IFwiP1wiIDogXCImXCIpICsgKFwiaWQ9XCIgKyBjb25uZWN0aW9uSWQpO1xyXG4gICAgfTtcclxuICAgIEh0dHBDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVUcmFuc3BvcnQgPSBmdW5jdGlvbiAodXJsLCByZXF1ZXN0ZWRUcmFuc3BvcnQsIG5lZ290aWF0ZVJlc3BvbnNlLCByZXF1ZXN0ZWRUcmFuc2ZlckZvcm1hdCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY29ubmVjdFVybCwgdHJhbnNwb3J0cywgX2ksIHRyYW5zcG9ydHNfMSwgZW5kcG9pbnQsIHRyYW5zcG9ydCwgZXhfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0VXJsID0gdGhpcy5jcmVhdGVDb25uZWN0VXJsKHVybCwgbmVnb3RpYXRlUmVzcG9uc2UuY29ubmVjdGlvbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSVRyYW5zcG9ydChyZXF1ZXN0ZWRUcmFuc3BvcnQpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkRlYnVnLCBcIkNvbm5lY3Rpb24gd2FzIHByb3ZpZGVkIGFuIGluc3RhbmNlIG9mIElUcmFuc3BvcnQsIHVzaW5nIHRoYXQgZGlyZWN0bHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IHJlcXVlc3RlZFRyYW5zcG9ydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50cmFuc3BvcnQuY29ubmVjdChjb25uZWN0VXJsLCByZXF1ZXN0ZWRUcmFuc2ZlckZvcm1hdCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGNoYW5nZSB0aGUgc3RhdGUgaWYgd2Ugd2VyZSBjb25uZWN0aW5nIHRvIG5vdCBvdmVyd3JpdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN0YXRlIGlmIHRoZSBjb25uZWN0aW9uIGlzIGFscmVhZHkgbWFya2VkIGFzIERpc2Nvbm5lY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKDAgLyogQ29ubmVjdGluZyAqLywgMSAvKiBDb25uZWN0ZWQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzID0gbmVnb3RpYXRlUmVzcG9uc2UuYXZhaWxhYmxlVHJhbnNwb3J0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCB0cmFuc3BvcnRzXzEgPSB0cmFuc3BvcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IHRyYW5zcG9ydHNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSB0cmFuc3BvcnRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IDAgLyogQ29ubmVjdGluZyAqLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gdGhpcy5yZXNvbHZlVHJhbnNwb3J0KGVuZHBvaW50LCByZXF1ZXN0ZWRUcmFuc3BvcnQsIHJlcXVlc3RlZFRyYW5zZmVyRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIHRyYW5zcG9ydCA9PT0gXCJudW1iZXJcIikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IHRoaXMuY29uc3RydWN0VHJhbnNwb3J0KHRyYW5zcG9ydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG5lZ290aWF0ZVJlc3BvbnNlLmNvbm5lY3Rpb25JZCA9PT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldE5lZ290aWF0aW9uUmVzcG9uc2UodXJsKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWdvdGlhdGVSZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdFVybCA9IHRoaXMuY3JlYXRlQ29ubmVjdFVybCh1cmwsIG5lZ290aWF0ZVJlc3BvbnNlLmNvbm5lY3Rpb25JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbNSwgNywgLCA4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudHJhbnNwb3J0LmNvbm5lY3QoY29ubmVjdFVybCwgcmVxdWVzdGVkVHJhbnNmZXJGb3JtYXQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZSgwIC8qIENvbm5lY3RpbmcgKi8sIDEgLyogQ29ubmVjdGVkICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkVycm9yLCBcIkZhaWxlZCB0byBzdGFydCB0aGUgdHJhbnNwb3J0ICdcIiArIEh0dHBUcmFuc3BvcnRUeXBlW3RyYW5zcG9ydF0gKyBcIic6IFwiICsgZXhfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gMiAvKiBEaXNjb25uZWN0ZWQgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ290aWF0ZVJlc3BvbnNlLmNvbm5lY3Rpb25JZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gaW5pdGlhbGl6ZSBhbnkgb2YgdGhlIGF2YWlsYWJsZSB0cmFuc3BvcnRzLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSHR0cENvbm5lY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdFRyYW5zcG9ydCA9IGZ1bmN0aW9uICh0cmFuc3BvcnQpIHtcclxuICAgICAgICBzd2l0Y2ggKHRyYW5zcG9ydCkge1xyXG4gICAgICAgICAgICBjYXNlIEh0dHBUcmFuc3BvcnRUeXBlLldlYlNvY2tldHM6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdlYlNvY2tldFRyYW5zcG9ydCh0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSwgdGhpcy5sb2dnZXIsIHRoaXMub3B0aW9ucy5sb2dNZXNzYWdlQ29udGVudCk7XHJcbiAgICAgICAgICAgIGNhc2UgSHR0cFRyYW5zcG9ydFR5cGUuU2VydmVyU2VudEV2ZW50czpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydCh0aGlzLmh0dHBDbGllbnQsIHRoaXMuYWNjZXNzVG9rZW5GYWN0b3J5LCB0aGlzLmxvZ2dlciwgdGhpcy5vcHRpb25zLmxvZ01lc3NhZ2VDb250ZW50KTtcclxuICAgICAgICAgICAgY2FzZSBIdHRwVHJhbnNwb3J0VHlwZS5Mb25nUG9sbGluZzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTG9uZ1BvbGxpbmdUcmFuc3BvcnQodGhpcy5odHRwQ2xpZW50LCB0aGlzLmFjY2Vzc1Rva2VuRmFjdG9yeSwgdGhpcy5sb2dnZXIsIHRoaXMub3B0aW9ucy5sb2dNZXNzYWdlQ29udGVudCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHRyYW5zcG9ydDogXCIgKyB0cmFuc3BvcnQgKyBcIi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEh0dHBDb25uZWN0aW9uLnByb3RvdHlwZS5yZXNvbHZlVHJhbnNwb3J0ID0gZnVuY3Rpb24gKGVuZHBvaW50LCByZXF1ZXN0ZWRUcmFuc3BvcnQsIHJlcXVlc3RlZFRyYW5zZmVyRm9ybWF0KSB7XHJcbiAgICAgICAgdmFyIHRyYW5zcG9ydCA9IEh0dHBUcmFuc3BvcnRUeXBlW2VuZHBvaW50LnRyYW5zcG9ydF07XHJcbiAgICAgICAgaWYgKHRyYW5zcG9ydCA9PT0gbnVsbCB8fCB0cmFuc3BvcnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuRGVidWcsIFwiU2tpcHBpbmcgdHJhbnNwb3J0ICdcIiArIGVuZHBvaW50LnRyYW5zcG9ydCArIFwiJyBiZWNhdXNlIGl0IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBjbGllbnQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zZmVyRm9ybWF0cyA9IGVuZHBvaW50LnRyYW5zZmVyRm9ybWF0cy5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIFRyYW5zZmVyRm9ybWF0W3NdOyB9KTtcclxuICAgICAgICAgICAgaWYgKHRyYW5zcG9ydE1hdGNoZXMocmVxdWVzdGVkVHJhbnNwb3J0LCB0cmFuc3BvcnQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNmZXJGb3JtYXRzLmluZGV4T2YocmVxdWVzdGVkVHJhbnNmZXJGb3JtYXQpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRyYW5zcG9ydCA9PT0gSHR0cFRyYW5zcG9ydFR5cGUuV2ViU29ja2V0cyAmJiB0eXBlb2YgV2ViU29ja2V0ID09PSBcInVuZGVmaW5lZFwiKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodHJhbnNwb3J0ID09PSBIdHRwVHJhbnNwb3J0VHlwZS5TZXJ2ZXJTZW50RXZlbnRzICYmIHR5cGVvZiBFdmVudFNvdXJjZSA9PT0gXCJ1bmRlZmluZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKExvZ0xldmVsLkRlYnVnLCBcIlNraXBwaW5nIHRyYW5zcG9ydCAnXCIgKyBIdHRwVHJhbnNwb3J0VHlwZVt0cmFuc3BvcnRdICsgXCInIGJlY2F1c2UgaXQgaXMgbm90IHN1cHBvcnRlZCBpbiB5b3VyIGVudmlyb25tZW50LidcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coTG9nTGV2ZWwuRGVidWcsIFwiU2VsZWN0aW5nIHRyYW5zcG9ydCAnXCIgKyBIdHRwVHJhbnNwb3J0VHlwZVt0cmFuc3BvcnRdICsgXCInXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5EZWJ1ZywgXCJTa2lwcGluZyB0cmFuc3BvcnQgJ1wiICsgSHR0cFRyYW5zcG9ydFR5cGVbdHJhbnNwb3J0XSArIFwiJyBiZWNhdXNlIGl0IGRvZXMgbm90IHN1cHBvcnQgdGhlIHJlcXVlc3RlZCB0cmFuc2ZlciBmb3JtYXQgJ1wiICsgVHJhbnNmZXJGb3JtYXRbcmVxdWVzdGVkVHJhbnNmZXJGb3JtYXRdICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5EZWJ1ZywgXCJTa2lwcGluZyB0cmFuc3BvcnQgJ1wiICsgSHR0cFRyYW5zcG9ydFR5cGVbdHJhbnNwb3J0XSArIFwiJyBiZWNhdXNlIGl0IHdhcyBkaXNhYmxlZCBieSB0aGUgY2xpZW50LlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuaXNJVHJhbnNwb3J0ID0gZnVuY3Rpb24gKHRyYW5zcG9ydCkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc3BvcnQgJiYgdHlwZW9mICh0cmFuc3BvcnQpID09PSBcIm9iamVjdFwiICYmIFwiY29ubmVjdFwiIGluIHRyYW5zcG9ydDtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcclxuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IGZyb20pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSB0bztcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBIdHRwQ29ubmVjdGlvbi5wcm90b3R5cGUuc3RvcENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgc3RvcEVycm9yLCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgdGhlIGVycm9yIGZyb20gdGhlIHRyYW5zcG9ydFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0aGlzLnN0b3BFcnJvciB8fCBlcnJvcjtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5FcnJvciwgXCJDb25uZWN0aW9uIGRpc2Nvbm5lY3RlZCB3aXRoIGVycm9yICdcIiArIGVycm9yICsgXCInLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5JbmZvcm1hdGlvbiwgXCJDb25uZWN0aW9uIGRpc2Nvbm5lY3RlZC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IDIgLyogRGlzY29ubmVjdGVkICovO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25jbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25jbG9zZShlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEh0dHBDb25uZWN0aW9uLnByb3RvdHlwZS5yZXNvbHZlVXJsID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIC8vIHN0YXJ0c1dpdGggaXMgbm90IHN1cHBvcnRlZCBpbiBJRVxyXG4gICAgICAgIGlmICh1cmwubGFzdEluZGV4T2YoXCJodHRwczovL1wiLCAwKSA9PT0gMCB8fCB1cmwubGFzdEluZGV4T2YoXCJodHRwOi8vXCIsIDApID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICF3aW5kb3cgfHwgIXdpbmRvdy5kb2N1bWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVzb2x2ZSAnXCIgKyB1cmwgKyBcIicuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZXR0aW5nIHRoZSB1cmwgdG8gdGhlIGhyZWYgcHJvcGVyeSBvZiBhbiBhbmNob3IgdGFnIGhhbmRsZXMgbm9ybWFsaXphdGlvblxyXG4gICAgICAgIC8vIGZvciB1cy4gVGhlcmUgYXJlIDMgbWFpbiBjYXNlcy5cclxuICAgICAgICAvLyAxLiBSZWxhdGl2ZSAgcGF0aCBub3JtYWxpemF0aW9uIGUuZyBcImJcIiAtPiBcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hL2JcIlxyXG4gICAgICAgIC8vIDIuIEFic29sdXRlIHBhdGggbm9ybWFsaXphdGlvbiBlLmcgXCIvYS9iXCIgLT4gXCJodHRwOi8vbG9jYWxob3N0OjUwMDAvYS9iXCJcclxuICAgICAgICAvLyAzLiBOZXR3b3JrcGF0aCByZWZlcmVuY2Ugbm9ybWFsaXphdGlvbiBlLmcgXCIvL2xvY2FsaG9zdDo1MDAwL2EvYlwiIC0+IFwiaHR0cDovL2xvY2FsaG9zdDo1MDAwL2EvYlwiXHJcbiAgICAgICAgdmFyIGFUYWcgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICAgICAgYVRhZy5ocmVmID0gdXJsO1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhMb2dMZXZlbC5JbmZvcm1hdGlvbiwgXCJOb3JtYWxpemluZyAnXCIgKyB1cmwgKyBcIicgdG8gJ1wiICsgYVRhZy5ocmVmICsgXCInLlwiKTtcclxuICAgICAgICByZXR1cm4gYVRhZy5ocmVmO1xyXG4gICAgfTtcclxuICAgIEh0dHBDb25uZWN0aW9uLnByb3RvdHlwZS5yZXNvbHZlTmVnb3RpYXRlVXJsID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHVybC5pbmRleE9mKFwiP1wiKTtcclxuICAgICAgICB2YXIgbmVnb3RpYXRlVXJsID0gdXJsLnN1YnN0cmluZygwLCBpbmRleCA9PT0gLTEgPyB1cmwubGVuZ3RoIDogaW5kZXgpO1xyXG4gICAgICAgIGlmIChuZWdvdGlhdGVVcmxbbmVnb3RpYXRlVXJsLmxlbmd0aCAtIDFdICE9PSBcIi9cIikge1xyXG4gICAgICAgICAgICBuZWdvdGlhdGVVcmwgKz0gXCIvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5lZ290aWF0ZVVybCArPSBcIm5lZ290aWF0ZVwiO1xyXG4gICAgICAgIG5lZ290aWF0ZVVybCArPSBpbmRleCA9PT0gLTEgPyBcIlwiIDogdXJsLnN1YnN0cmluZyhpbmRleCk7XHJcbiAgICAgICAgcmV0dXJuIG5lZ290aWF0ZVVybDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSHR0cENvbm5lY3Rpb247XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEh0dHBDb25uZWN0aW9uIH07XHJcbmZ1bmN0aW9uIHRyYW5zcG9ydE1hdGNoZXMocmVxdWVzdGVkVHJhbnNwb3J0LCBhY3R1YWxUcmFuc3BvcnQpIHtcclxuICAgIHJldHVybiAhcmVxdWVzdGVkVHJhbnNwb3J0IHx8ICgoYWN0dWFsVHJhbnNwb3J0ICYgcmVxdWVzdGVkVHJhbnNwb3J0KSAhPT0gMCk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SHR0cENvbm5lY3Rpb24uanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL0lIdWJQcm90b2NvbFwiO1xyXG5pbXBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0lMb2dnZXJcIjtcclxuaW1wb3J0IHsgVHJhbnNmZXJGb3JtYXQgfSBmcm9tIFwiLi9JVHJhbnNwb3J0XCI7XHJcbmltcG9ydCB7IE51bGxMb2dnZXIgfSBmcm9tIFwiLi9Mb2dnZXJzXCI7XHJcbmltcG9ydCB7IFRleHRNZXNzYWdlRm9ybWF0IH0gZnJvbSBcIi4vVGV4dE1lc3NhZ2VGb3JtYXRcIjtcclxudmFyIEpTT05fSFVCX1BST1RPQ09MX05BTUUgPSBcImpzb25cIjtcclxuLyoqIEltcGxlbWVudHMgdGhlIEpTT04gSHViIFByb3RvY29sLiAqL1xyXG52YXIgSnNvbkh1YlByb3RvY29sID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSnNvbkh1YlByb3RvY29sKCkge1xyXG4gICAgICAgIC8qKiBAaW5oZXJpdERvYyAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEpTT05fSFVCX1BST1RPQ09MX05BTUU7XHJcbiAgICAgICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gMTtcclxuICAgICAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgICAgICB0aGlzLnRyYW5zZmVyRm9ybWF0ID0gVHJhbnNmZXJGb3JtYXQuVGV4dDtcclxuICAgIH1cclxuICAgIC8qKiBDcmVhdGVzIGFuIGFycmF5IG9mIHtAbGluayBIdWJNZXNzYWdlfSBvYmplY3RzIGZyb20gdGhlIHNwZWNpZmllZCBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dCBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICogQHBhcmFtIHtJTG9nZ2VyfSBsb2dnZXIgQSBsb2dnZXIgdGhhdCB3aWxsIGJlIHVzZWQgdG8gbG9nIG1lc3NhZ2VzIHRoYXQgb2NjdXIgZHVyaW5nIHBhcnNpbmcuXHJcbiAgICAgKi9cclxuICAgIEpzb25IdWJQcm90b2NvbC5wcm90b3R5cGUucGFyc2VNZXNzYWdlcyA9IGZ1bmN0aW9uIChpbnB1dCwgbG9nZ2VyKSB7XHJcbiAgICAgICAgLy8gVGhlIGludGVyZmFjZSBkb2VzIGFsbG93IFwiQXJyYXlCdWZmZXJcIiB0byBiZSBwYXNzZWQgaW4sIGJ1dCB0aGlzIGltcGxlbWVudGF0aW9uIGRvZXMgbm90LiBTbyBsZXQncyB0aHJvdyBhIHVzZWZ1bCBlcnJvci5cclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEpTT04gaHViIHByb3RvY29sLiBFeHBlY3RlZCBhIHN0cmluZy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaW5wdXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nZ2VyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlciA9IE51bGxMb2dnZXIuaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBtZXNzYWdlc1xyXG4gICAgICAgIHZhciBtZXNzYWdlcyA9IFRleHRNZXNzYWdlRm9ybWF0LnBhcnNlKGlucHV0KTtcclxuICAgICAgICB2YXIgaHViTWVzc2FnZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1lc3NhZ2VzXzEgPSBtZXNzYWdlczsgX2kgPCBtZXNzYWdlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzXzFbX2ldO1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkTWVzc2FnZSA9IEpTT04ucGFyc2UobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2VkTWVzc2FnZS50eXBlICE9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBheWxvYWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAocGFyc2VkTWVzc2FnZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkludm9jYXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ludm9jYXRpb25NZXNzYWdlKHBhcnNlZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5TdHJlYW1JdGVtOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdHJlYW1JdGVtTWVzc2FnZShwYXJzZWRNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuQ29tcGxldGlvbjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29tcGxldGlvbk1lc3NhZ2UocGFyc2VkTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLlBpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIHZhbHVlLCBubyBuZWVkIHRvIHZhbGlkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLkNsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsbCBvcHRpb25hbCB2YWx1ZXMsIG5vIG5lZWQgdG8gdmFsaWRhdGVcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRnV0dXJlIHByb3RvY29sIGNoYW5nZXMgY2FuIGFkZCBtZXNzYWdlIHR5cGVzLCBvbGQgY2xpZW50cyBjYW4gaWdub3JlIHRoZW1cclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ0xldmVsLkluZm9ybWF0aW9uLCBcIlVua25vd24gbWVzc2FnZSB0eXBlICdcIiArIHBhcnNlZE1lc3NhZ2UudHlwZSArIFwiJyBpZ25vcmVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodWJNZXNzYWdlcy5wdXNoKHBhcnNlZE1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaHViTWVzc2FnZXM7XHJcbiAgICB9O1xyXG4gICAgLyoqIFdyaXRlcyB0aGUgc3BlY2lmaWVkIHtAbGluayBIdWJNZXNzYWdlfSB0byBhIHN0cmluZyBhbmQgcmV0dXJucyBpdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0h1Yk1lc3NhZ2V9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gd3JpdGUuXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtZXNzYWdlLlxyXG4gICAgICovXHJcbiAgICBKc29uSHViUHJvdG9jb2wucHJvdG90eXBlLndyaXRlTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuIFRleHRNZXNzYWdlRm9ybWF0LndyaXRlKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcclxuICAgIH07XHJcbiAgICBKc29uSHViUHJvdG9jb2wucHJvdG90eXBlLmlzSW52b2NhdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RW1wdHlTdHJpbmcobWVzc2FnZS50YXJnZXQsIFwiSW52YWxpZCBwYXlsb2FkIGZvciBJbnZvY2F0aW9uIG1lc3NhZ2UuXCIpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlLmludm9jYXRpb25JZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0Tm90RW1wdHlTdHJpbmcobWVzc2FnZS5pbnZvY2F0aW9uSWQsIFwiSW52YWxpZCBwYXlsb2FkIGZvciBJbnZvY2F0aW9uIG1lc3NhZ2UuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uSHViUHJvdG9jb2wucHJvdG90eXBlLmlzU3RyZWFtSXRlbU1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RW1wdHlTdHJpbmcobWVzc2FnZS5pbnZvY2F0aW9uSWQsIFwiSW52YWxpZCBwYXlsb2FkIGZvciBTdHJlYW1JdGVtIG1lc3NhZ2UuXCIpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlLml0ZW0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBheWxvYWQgZm9yIFN0cmVhbUl0ZW0gbWVzc2FnZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25IdWJQcm90b2NvbC5wcm90b3R5cGUuaXNDb21wbGV0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UucmVzdWx0ICYmIG1lc3NhZ2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXlsb2FkIGZvciBDb21wbGV0aW9uIG1lc3NhZ2UuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW1lc3NhZ2UucmVzdWx0ICYmIG1lc3NhZ2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3RFbXB0eVN0cmluZyhtZXNzYWdlLmVycm9yLCBcIkludmFsaWQgcGF5bG9hZCBmb3IgQ29tcGxldGlvbiBtZXNzYWdlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3RFbXB0eVN0cmluZyhtZXNzYWdlLmludm9jYXRpb25JZCwgXCJJbnZhbGlkIHBheWxvYWQgZm9yIENvbXBsZXRpb24gbWVzc2FnZS5cIik7XHJcbiAgICB9O1xyXG4gICAgSnNvbkh1YlByb3RvY29sLnByb3RvdHlwZS5hc3NlcnROb3RFbXB0eVN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIiB8fCB2YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEpzb25IdWJQcm90b2NvbDtcclxufSgpKTtcclxuZXhwb3J0IHsgSnNvbkh1YlByb3RvY29sIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUpzb25IdWJQcm90b2NvbC5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIC5ORVQgRm91bmRhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbmltcG9ydCB7IEh0dHBDb25uZWN0aW9uIH0gZnJvbSBcIi4vSHR0cENvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHsgSHViQ29ubmVjdGlvbiB9IGZyb20gXCIuL0h1YkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHsgSnNvbkh1YlByb3RvY29sIH0gZnJvbSBcIi4vSnNvbkh1YlByb3RvY29sXCI7XHJcbmltcG9ydCB7IE51bGxMb2dnZXIgfSBmcm9tIFwiLi9Mb2dnZXJzXCI7XHJcbmltcG9ydCB7IEFyZywgQ29uc29sZUxvZ2dlciB9IGZyb20gXCIuL1V0aWxzXCI7XHJcbi8qKiBBIGJ1aWxkZXIgZm9yIGNvbmZpZ3VyaW5nIHtAbGluayBIdWJDb25uZWN0aW9ufSBpbnN0YW5jZXMuICovXHJcbnZhciBIdWJDb25uZWN0aW9uQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEh1YkNvbm5lY3Rpb25CdWlsZGVyKCkge1xyXG4gICAgfVxyXG4gICAgSHViQ29ubmVjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmNvbmZpZ3VyZUxvZ2dpbmcgPSBmdW5jdGlvbiAobG9nZ2luZykge1xyXG4gICAgICAgIEFyZy5pc1JlcXVpcmVkKGxvZ2dpbmcsIFwibG9nZ2luZ1wiKTtcclxuICAgICAgICBpZiAoaXNMb2dnZXIobG9nZ2luZykpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIgPSBsb2dnaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgQ29uc29sZUxvZ2dlcihsb2dnaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgSHViQ29ubmVjdGlvbkJ1aWxkZXIucHJvdG90eXBlLndpdGhVcmwgPSBmdW5jdGlvbiAodXJsLCB0cmFuc3BvcnRUeXBlT3JPcHRpb25zKSB7XHJcbiAgICAgICAgQXJnLmlzUmVxdWlyZWQodXJsLCBcInVybFwiKTtcclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICAvLyBGbG93LXR5cGluZyBrbm93cyB3aGVyZSBpdCdzIGF0LiBTaW5jZSBIdHRwVHJhbnNwb3J0VHlwZSBpcyBhIG51bWJlciBhbmQgSUh0dHBDb25uZWN0aW9uT3B0aW9ucyBpcyBndWFyYW50ZWVkXHJcbiAgICAgICAgLy8gdG8gYmUgYW4gb2JqZWN0LCB3ZSBrbm93IChhcyBkb2VzIFR5cGVTY3JpcHQpIHRoaXMgY29tcGFyaXNvbiBpcyBhbGwgd2UgbmVlZCB0byBmaWd1cmUgb3V0IHdoaWNoIG92ZXJsb2FkIHdhcyBjYWxsZWQuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0cmFuc3BvcnRUeXBlT3JPcHRpb25zID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cENvbm5lY3Rpb25PcHRpb25zID0gdHJhbnNwb3J0VHlwZU9yT3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cENvbm5lY3Rpb25PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiB0cmFuc3BvcnRUeXBlT3JPcHRpb25zLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKiogQ29uZmlndXJlcyB0aGUge0BsaW5rIEh1YkNvbm5lY3Rpb259IHRvIHVzZSB0aGUgc3BlY2lmaWVkIEh1YiBQcm90b2NvbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0lIdWJQcm90b2NvbH0gcHJvdG9jb2wgVGhlIHtAbGluayBJSHViUHJvdG9jb2x9IGltcGxlbWVudGF0aW9uIHRvIHVzZS5cclxuICAgICAqL1xyXG4gICAgSHViQ29ubmVjdGlvbkJ1aWxkZXIucHJvdG90eXBlLndpdGhIdWJQcm90b2NvbCA9IGZ1bmN0aW9uIChwcm90b2NvbCkge1xyXG4gICAgICAgIEFyZy5pc1JlcXVpcmVkKHByb3RvY29sLCBcInByb3RvY29sXCIpO1xyXG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBwcm90b2NvbDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKiogQ3JlYXRlcyBhIHtAbGluayBIdWJDb25uZWN0aW9ufSBmcm9tIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgc3BlY2lmaWVkIGluIHRoaXMgYnVpbGRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7SHViQ29ubmVjdGlvbn0gVGhlIGNvbmZpZ3VyZWQge0BsaW5rIEh1YkNvbm5lY3Rpb259LlxyXG4gICAgICovXHJcbiAgICBIdWJDb25uZWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gSWYgaHR0cENvbm5lY3Rpb25PcHRpb25zIGhhcyBhIGxvZ2dlciwgdXNlIGl0LiBPdGhlcndpc2UsIG92ZXJyaWRlIGl0IHdpdGggdGhlIG9uZVxyXG4gICAgICAgIC8vIHByb3ZpZGVkIHRvIGNvbmZpZ3VyZUxvZ2dlclxyXG4gICAgICAgIHZhciBodHRwQ29ubmVjdGlvbk9wdGlvbnMgPSB0aGlzLmh0dHBDb25uZWN0aW9uT3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAvLyBJZiBpdCdzICdudWxsJywgdGhlIHVzZXIgKipleHBsaWNpdGx5KiogYXNrZWQgZm9yIG51bGwsIGRvbid0IG1lc3Mgd2l0aCBpdC5cclxuICAgICAgICBpZiAoaHR0cENvbm5lY3Rpb25PcHRpb25zLmxvZ2dlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIElmIG91ciBsb2dnZXIgaXMgdW5kZWZpbmVkIG9yIG51bGwsIHRoYXQncyBPSywgdGhlIEh0dHBDb25uZWN0aW9uIGNvbnN0cnVjdG9yIHdpbGwgaGFuZGxlIGl0LlxyXG4gICAgICAgICAgICBodHRwQ29ubmVjdGlvbk9wdGlvbnMubG9nZ2VyID0gdGhpcy5sb2dnZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdyBjcmVhdGUgdGhlIGNvbm5lY3Rpb25cclxuICAgICAgICBpZiAoIXRoaXMudXJsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSAnSHViQ29ubmVjdGlvbkJ1aWxkZXIud2l0aFVybCcgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBidWlsZGluZyB0aGUgY29ubmVjdGlvbi5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb25uZWN0aW9uID0gbmV3IEh0dHBDb25uZWN0aW9uKHRoaXMudXJsLCBodHRwQ29ubmVjdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBIdWJDb25uZWN0aW9uLmNyZWF0ZShjb25uZWN0aW9uLCB0aGlzLmxvZ2dlciB8fCBOdWxsTG9nZ2VyLmluc3RhbmNlLCB0aGlzLnByb3RvY29sIHx8IG5ldyBKc29uSHViUHJvdG9jb2woKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEh1YkNvbm5lY3Rpb25CdWlsZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBIdWJDb25uZWN0aW9uQnVpbGRlciB9O1xyXG5mdW5jdGlvbiBpc0xvZ2dlcihsb2dnZXIpIHtcclxuICAgIHJldHVybiBsb2dnZXIubG9nICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SHViQ29ubmVjdGlvbkJ1aWxkZXIuanMubWFwIiwiLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4vLyBWZXJzaW9uIHRva2VuIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgcHJlcGFjayBjb21tYW5kXHJcbi8qKiBUaGUgdmVyc2lvbiBvZiB0aGUgU2lnbmFsUiBjbGllbnQuICovXHJcbmV4cG9ydCB2YXIgVkVSU0lPTiA9IFwiMS4wLjBcIjtcclxuZXhwb3J0IHsgSHR0cEVycm9yLCBUaW1lb3V0RXJyb3IgfSBmcm9tIFwiLi9FcnJvcnNcIjtcclxuZXhwb3J0IHsgRGVmYXVsdEh0dHBDbGllbnQsIEh0dHBDbGllbnQsIEh0dHBSZXNwb25zZSB9IGZyb20gXCIuL0h0dHBDbGllbnRcIjtcclxuZXhwb3J0IHsgSHViQ29ubmVjdGlvbiB9IGZyb20gXCIuL0h1YkNvbm5lY3Rpb25cIjtcclxuZXhwb3J0IHsgSHViQ29ubmVjdGlvbkJ1aWxkZXIgfSBmcm9tIFwiLi9IdWJDb25uZWN0aW9uQnVpbGRlclwiO1xyXG5leHBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuL0lIdWJQcm90b2NvbFwiO1xyXG5leHBvcnQgeyBMb2dMZXZlbCB9IGZyb20gXCIuL0lMb2dnZXJcIjtcclxuZXhwb3J0IHsgSHR0cFRyYW5zcG9ydFR5cGUsIFRyYW5zZmVyRm9ybWF0IH0gZnJvbSBcIi4vSVRyYW5zcG9ydFwiO1xyXG5leHBvcnQgeyBOdWxsTG9nZ2VyIH0gZnJvbSBcIi4vTG9nZ2Vyc1wiO1xyXG5leHBvcnQgeyBKc29uSHViUHJvdG9jb2wgfSBmcm9tIFwiLi9Kc29uSHViUHJvdG9jb2xcIjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLy9pbXBvcnQgKiBhcyBzaWduYWxSIGZyb20gXCJzaWduYWxyLmpzXCI7XHJcbi8vaW1wb3J0IHNpZ25hbFIgPSByZXF1aXJlKFwiLi9zaWduYWxyLmpzXCIpO1xyXG5cclxuaW1wb3J0ICcuLi9jc3Mvc3R5bGUubGVzcyc7XHJcbmltcG9ydCB7IEh1YkNvbm5lY3Rpb25CdWlsZGVyLCBIdWJDb25uZWN0aW9uIH0gZnJvbSBcIkBhc3BuZXQvc2lnbmFsclwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0ZXIgfSBmcm9tIFwiLi9SZXF1ZXN0ZXJcIjtcclxuLy9pbXBvcnQgeyBtb2R1bGUgfSBmcm9tIFwiLi4vLi4vd2VicGFjay5jb25maWdcIjtcclxuXHJcbi8qZnVuY3Rpb24gdGVzdFF1ZXJ5KClcclxue1xyXG4gICAgeGhyLm9wZW4oJ1BPU1QnLCBcIkZ1bmN0aW9uL0dldFN1bW1vbmVySW5mb1wiLCB0cnVlKTtcclxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBwcm9jZXNzUmVxdWVzdDtcclxuXHJcbiAgICBsZXQgZW5kcG9pbnQgPSBcImV1dzFcIjtcclxuICAgIGxldCBuYW1lID0gXCJoZW1tb2xlZ1wiO1xyXG4gICAgbGV0IGtleSA9IFwiUkdBUEktMWQxMTlhMjgtMmE3MS00YjZjLWEwMjYtMzU2MDU1NDBmNjg0XCI7XHJcblxyXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7IFwiZW5kcG9pbnRcIjogZW5kcG9pbnQsIFwibmFtZVwiOiBuYW1lLCBcImtleVwiOiBrZXl9KSk7XHJcbn0qL1xyXG5cclxuLypmdW5jdGlvbiBwcm9jZXNzUmVxdWVzdChlIDpFdmVudClcclxue1xyXG4gICAgc3dpdGNoKHhoci5yZWFkeVN0YXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNhc2UgMTogY29uc29sZS5sb2coXCJjaGFubmVsU2VydmVyTXNnIG9wZW4sIHJlcXVlc3Qgbm90IHNlbnRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6IGNvbnNvbGUubG9nKFwicmVxdWVzdCBzZW50LCBzdGF0dXMgaXMgXCIgKyB4aHIuc3RhdHVzICsgXCIgXCIgKyB4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6IGNvbnNvbGUubG9nKFwiZG93bmxvYWRpbmcuLi5cIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQ6IHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGxldCB0ZXN0TWF0Y2hlc0luZm8gPSByZXNwb25zZSBhcyBEQk1hdGNoW107XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGVzdE1hdGNoZXNJbmZvLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAvKmxldCB0ZXN0V2luUmF0ZSA9IHJlc3BvbnNlIGFzIFdpbnJhdGVJbmZvO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVzdFdpblJhdGUuV2luUmF0ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIH0gICAgXHJcbn0qL1xyXG5cclxudmFyIGJ0blVwZGF0ZURCOiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xyXG52YXIgaW5wdXRBcGlLZXk6IEpRdWVyeTxIVE1MRWxlbWVudD47XHJcblxyXG52YXIgcmVxdWVzdGVyV2lucmF0ZTogUmVxdWVzdGVyO1xyXG52YXIgcmVxdWVzdGVyVXBkYXRlREI6IFJlcXVlc3RlcjtcclxudmFyIHJlcXVlc3RlckNoYW1waW9uSWNvblN0cmluZzogUmVxdWVzdGVyO1xyXG52YXIgY2hhbm5lbFNlcnZlck1zZzogSHViQ29ubmVjdGlvbjtcclxuXHJcbmlmIChtb2R1bGUuaG90KVxyXG57XHJcbiAgICBtb2R1bGUuaG90LmFjY2VwdCgpOy8qW10sXHJcbiAgICAgICAgZnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FjY2VwdGluZyB0aGUgdXBkYXRlZCBwcmludE1lIG1vZHVsZSEnKTtcclxuICAgICAgICB9KTsqL1xyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gb25Mb2FkO1xyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBvbkxvYWQoKVxyXG57XHJcbiAgICBjaGFubmVsU2VydmVyTXNnID0gbmV3IEh1YkNvbm5lY3Rpb25CdWlsZGVyKClcclxuICAgICAgICAud2l0aFVybChcIi9jaGF0SHViXCIpXHJcbiAgICAgICAgLmJ1aWxkKCk7XHJcblxyXG4gICAgYnRuVXBkYXRlREIgPSAkKFwiI2J0blVwZGF0ZURCXCIpO1xyXG4gICAgaW5wdXRBcGlLZXkgPSAkKFwiI2lucHV0QXBpS2V5XCIpO1xyXG5cclxuICAgIGJ0blVwZGF0ZURCLmNsaWNrKG9uQ2xpY2tCdG5VcGRhdGVEQilcclxuICAgICAgICAudG9nZ2xlQ2xhc3MoXCJBbmltVXBkYXRlREJcIilcclxuICAgICAgICAudGV4dChcImxvb2tpbmcgZm9yIG5ldyBnYW1lcy4uLlwiKVxyXG4gICAgICAgIC5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcblxyXG4gICAgaW5wdXRBcGlLZXkub24oXCJ0cmFuc2l0aW9uZW5kXCIsZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGlmICgkKFwiI3RvcENvbnRhaW5lclwiKS5oYXNDbGFzcyhcInRvcENvbnRhaW5lck9uTm9SaW90Q29ubmVjdGlvblwiKSlcclxuICAgICAgICAgICAgaW5wdXRBcGlLZXkuY3NzKFwiekluZGV4XCIsIDApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgaW5wdXRBcGlLZXkuY3NzKFwiekluZGV4XCIsIC0xKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGRDaGFtcGlvblwiKS5vbmNoYW5nZSA9IG9uRGRDaGFtcGlvblNlbGVjdDtcclxuXHJcbiAgICByZXF1ZXN0ZXJXaW5yYXRlID0gbmV3IFJlcXVlc3RlcihcImh0dHBzOi8vbG9jYWxob3N0OjUwMDEvTWFpbi9HZXRXaW5yYXRlQnlDaGFtcElEL1wiKTtcclxuICAgIHJlcXVlc3RlcldpbnJhdGUucmVxdWVzdGVyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHNldFdpbnJhdGVJbmZvO1xyXG4gICAgcmVxdWVzdGVyV2lucmF0ZS5wYXJhbWV0ZXIgPSBcIjIwMlwiO1xyXG4gICAgcmVxdWVzdGVyV2lucmF0ZS5zZW5kKCk7XHJcblxyXG4gICAgcmVxdWVzdGVyVXBkYXRlREIgPSBuZXcgUmVxdWVzdGVyKFwiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMS9NYWluL0dldEFsbFBsYXllZENoYW1waW9uc1wiKTtcclxuICAgIHJlcXVlc3RlclVwZGF0ZURCLnJlcXVlc3Rlci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBzZXRBbGxQbGF5ZWRDaGFtcGlvbnM7XHJcbiAgICByZXF1ZXN0ZXJVcGRhdGVEQi5zZW5kKCk7XHJcblxyXG5cclxuICAgIGNoYW5uZWxTZXJ2ZXJNc2cub24oXCJSZWNlaXZlTWVzc2FnZVwiLFxyXG4gICAgICAgICh1c2VyLCBtZXNzYWdlKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgbXNnID0gbWVzc2FnZS5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIikucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRNc2cgPSB1c2VyICsgXCIgc2F5cyBcIiArIG1zZztcclxuICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gZW5jb2RlZE1zZztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZW5jb2RlZE1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBjaGFubmVsU2VydmVyTXNnLm9uKFwiVXBkYXRlQnRuVXBkYXRlREJUZXh0XCIsXHJcbiAgICAgICAgKHVzZXIsIG1lc3NhZ2UpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBidG5VcGRhdGVEQi50ZXh0KFwiVXBkYXRlIERCIChcIiArIG1lc3NhZ2UgKyBcIilcIilcclxuICAgICAgICAgICAgICAgIC5wcm9wKFwiZGlzYWJsZWRcIiwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudG9nZ2xlQ2xhc3MoXCJBbmltVXBkYXRlREJcIik7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyLCBtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlID09PSBcIk5vIG5ldyBNYXRjaGVzXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ0blVwZGF0ZURCLnRleHQoXCJObyBuZXcgTWF0Y2hlc1wiKTtcclxuICAgICAgICAgICAgICAgIGJ0blVwZGF0ZURCLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWVzc2FnZSA9PT0gXCJObyBjb25uZWN0aW9uIHRvIFJpb3QgU2VydmVyc1wiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5VcGRhdGVEQi50ZXh0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgYnRuVXBkYXRlREIucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN0b3BDb250YWluZXJcIikuYWRkQ2xhc3MoXCJ0b3BDb250YWluZXJPbk5vUmlvdENvbm5lY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEFwaUtleS5vbihcImtleXByZXNzXCIsIG9uS2V5cHJlc3NJbnB1dEFwaUtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoJChcIiN0b3BDb250YWluZXJcIikuaGFzQ2xhc3MoXCJ0b3BDb250YWluZXJPbk5vUmlvdENvbm5lY3Rpb25cIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0QXBpS2V5LmNzcyhcInpJbmRleFwiLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3RvcENvbnRhaW5lclwiKS50b2dnbGVDbGFzcyhcInRvcENvbnRhaW5lck9uTm9SaW90Q29ubmVjdGlvblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgY2hhbm5lbFNlcnZlck1zZy5vbihcIkFkZE1lc3NhZ2VUb0NvbnNvbGVcIixcclxuICAgICAgICAodXNlciwgbWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICBhZGRNZXNzYWdlVG9Db25zb2xlKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyLCBtZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGNoYW5uZWxTZXJ2ZXJNc2cuc3RhcnQoKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIudG9TdHJpbmcoKSkpO1xyXG5cclxuICAgICQoXCIjYnRuVGVzdFwiKS5jbGljayhmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHggPSBuZXcgUmVxdWVzdGVyKFwiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMS9NYWluL01haW4vXCIpO1xyXG4gICAgICAgIHguc2VuZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHJlcXVlc3Rlck1haW4gPSBuZXcgUmVxdWVzdGVyKFwiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMS9NYWluL01haW4vXCIpO1xyXG4gICAgcmVxdWVzdGVyTWFpbi5zZW5kKCk7XHJcblxyXG4gICAgaSA9IDA7XHJcbiAgICAkKFwiI2J0bkFkZE1lc3NhZ2VcIikuY2xpY2sob25CdG5BZGRNZXNzYWdlQ2xpY2spO1xyXG4gICAgJChcIiNidG5VcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGFcIikuY2xpY2sob25CdG5VcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGFDbGljayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uS2V5cHJlc3NJbnB1dEFwaUtleShlIDogYW55KVxyXG57XHJcbiAgICB2YXIga2V5ID0gZS53aGljaDtcclxuICAgIGlmIChrZXkgPT0gMTMpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RlciA9IG5ldyBSZXF1ZXN0ZXIoXCJodHRwczovL2xvY2FsaG9zdDo1MDAxL01haW4vVXBkYXRlQXBpS2V5L1wiKTtcclxuICAgICAgICByZXF1ZXN0ZXIucGFyYW1ldGVyID0gaW5wdXRBcGlLZXkudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICByZXF1ZXN0ZXIuc2VuZCgpO1xyXG4gICAgICAgIGJ0blVwZGF0ZURCLnRleHQoXCJsb29raW5nIGZvciBuZXcgZ2FtZXMuLi5cIik7XHJcbiAgICAgICAgYnRuVXBkYXRlREIudG9nZ2xlQ2xhc3MoXCJBbmltVXBkYXRlREJcIik7XHJcbiAgICAgICAgaW5wdXRBcGlLZXkub2ZmKFwia2V5cHJlc3NcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZE1lc3NhZ2VUb0NvbnNvbGUobWVzc2FnZTogc3RyaW5nKVxyXG57XHJcbiAgICAkKFwiI3VwZGF0ZXNcIikuYXBwZW5kKCc8bGFiZWw+JyArIG1lc3NhZ2UgKyAnPC9sYWJlbD48YnIvPicpO1xyXG4gICAgXHJcbiAgICB2YXIgc2Nyb2xsUG9zID0gJChcIiN1cGRhdGVzID4gbGFiZWw6bGFzdFwiKS5oZWlnaHQoKSAqICQoXCIjdXBkYXRlc1wiKS5jaGlsZHJlbigpLmxlbmd0aCAvIDI7XHJcbiAgICAkKFwiI3VwZGF0ZXNcIikuYW5pbWF0ZSh7IHNjcm9sbFRvcDogc2Nyb2xsUG9zIH0sIDAsIFwiXCIsICgpID0+IHsgfSk7XHJcbn1cclxuXHJcbnZhciBpIDogbnVtYmVyO1xyXG5mdW5jdGlvbiBvbkJ0bkFkZE1lc3NhZ2VDbGljaygpXHJcbntcclxuICAgIGFkZE1lc3NhZ2VUb0NvbnNvbGUoXCJ0ZXN0IFwiICsgaSk7XHJcbiAgICBpKys7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRGRDaGFtcGlvblNlbGVjdChlOiBFdmVudClcclxue1xyXG4gICAgdmFyIHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGRDaGFtcGlvblwiKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHJlcXVlc3RlcldpbnJhdGUucGFyYW1ldGVyID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICByZXF1ZXN0ZXJXaW5yYXRlLnNlbmQoKTtcclxuXHJcbiAgICByZXF1ZXN0ZXJDaGFtcGlvbkljb25TdHJpbmcgPSBuZXcgUmVxdWVzdGVyKFwiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMS9NYWluL0dldENoYW1waW9uSWNvblN0cmluZ0J5SURBc3luYy9cIik7XHJcbiAgICByZXF1ZXN0ZXJDaGFtcGlvbkljb25TdHJpbmcucGFyYW1ldGVyID0gc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICByZXF1ZXN0ZXJDaGFtcGlvbkljb25TdHJpbmcucmVxdWVzdGVyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHNldEljb25TdHJpbmc7XHJcbiAgICByZXF1ZXN0ZXJDaGFtcGlvbkljb25TdHJpbmcuc2VuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRXaW5yYXRlSW5mbyhlOiBFdmVudClcclxue1xyXG4gICAgaWYgKHJlcXVlc3RlcldpbnJhdGUucmVxdWVzdGVyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXF1ZXN0ZXJXaW5yYXRlLnJlcXVlc3Rlci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgLy9jaGVjayBOYU4nc1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5XaW5SYXRlMldlZWtzLnRvU3RyaW5nKCkgPT09IFwiTmFOXCIpXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLldpblJhdGUyV2Vla3MgPSBcIi1cIjtcclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLldpblJhdGUzTW9udGhzLnRvU3RyaW5nKCkgPT09IFwiTmFOXCIpXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLldpblJhdGUzTW9udGhzID0gXCItXCI7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZS5XaW5SYXRlLnRvU3RyaW5nKCkgPT09IFwiTmFOXCIpXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLldpblJhdGUgPSBcIi1cIjtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYmxXaW5SYXRlMldlZWtzXCIpLmlubmVyVGV4dCA9IHJlc3BvbnNlLldpblJhdGUyV2Vla3MudG9TdHJpbmcoKSArIFwiJVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGJsR2FtZXNQbGF5ZWQyV2Vla3NcIikuaW5uZXJUZXh0ID0gcmVzcG9uc2UuR2FtZUNvdW50MldlZWtzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYmxBdmdHYW1lVGltZTJXZWVrc1wiKS5pbm5lclRleHQgPSBjb252ZXJ0U2Vjb25kc1RvVGltZSggcmVzcG9uc2UuQXZnR2FtZVRpbWUyV2Vla3MgKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxibFdpblJhdGUzTW9udGhzXCIpLmlubmVyVGV4dCA9IHJlc3BvbnNlLldpblJhdGUzTW9udGhzLnRvU3RyaW5nKCkgKyBcIiVcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxibEdhbWVzUGxheWVkM01vbnRoc1wiKS5pbm5lclRleHQgPSByZXNwb25zZS5HYW1lQ291bnQzTW9udGhzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYmxBdmdHYW1lVGltZTNNb250aHNcIikuaW5uZXJUZXh0ID0gY29udmVydFNlY29uZHNUb1RpbWUoIHJlc3BvbnNlLkF2Z0dhbWVUaW1lM01vbnRocyApO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGJsV2luUmF0ZVwiKS5pbm5lclRleHQgPSByZXNwb25zZS5XaW5SYXRlLnRvU3RyaW5nKCkgKyBcIiVcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxibEdhbWVzUGxheWVkXCIpLmlubmVyVGV4dCA9IHJlc3BvbnNlLkdhbWVDb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGJsQXZnR2FtZVRpbWVcIikuaW5uZXJUZXh0ID0gY29udmVydFNlY29uZHNUb1RpbWUoIHJlc3BvbnNlLkF2Z0dhbWVUaW1lICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEljb25TdHJpbmcoKVxyXG57XHJcbiAgICBpZiAocmVxdWVzdGVyQ2hhbXBpb25JY29uU3RyaW5nLnJlcXVlc3Rlci5yZWFkeVN0YXRlID09PSA0KVxyXG4gICAge1xyXG4gICAgICAgIHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UocmVxdWVzdGVyQ2hhbXBpb25JY29uU3RyaW5nLnJlcXVlc3Rlci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QWxsUGxheWVkQ2hhbXBpb25zKGU6IEV2ZW50KVxyXG57XHJcbiAgICBpZiAocmVxdWVzdGVyVXBkYXRlREIucmVxdWVzdGVyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlcXVlc3RlclVwZGF0ZURCLnJlcXVlc3Rlci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgcmVzcG9uc2UuZm9yRWFjaCgoY2hhbXBpb246IGFueSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuZXdvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBuZXdvcHRpb24udGV4dCA9IGNoYW1waW9uLm5hbWU7XHJcbiAgICAgICAgICAgIG5ld29wdGlvbi52YWx1ZSA9IGNoYW1waW9uLmlkO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRkQ2hhbXBpb25cIikuYXBwZW5kQ2hpbGQobmV3b3B0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG9uQ2xpY2tCdG5VcGRhdGVEQigpXHJcbntcclxuICAgIC8vY2hhbm5lbFNlcnZlck1zZy5pbnZva2UoXCJTZW5kTWVzc2FnZVwiLCBcIm9uQ2xpY2tVcGRhdGVEQlwiLCBcIm9uQ2xpY2tVcGRhdGVEQk1zZ1wiKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIudG9TdHJpbmcoKSkpO1xyXG5cclxuICAgIHJlcXVlc3RlclVwZGF0ZURCID0gbmV3IFJlcXVlc3RlcihcImh0dHBzOi8vbG9jYWxob3N0OjUwMDEvTWFpbi9VcGRhdGVEQlwiKTtcclxuICAgIHJlcXVlc3RlclVwZGF0ZURCLnNlbmQoKTtcclxuXHJcbiAgICByZXF1ZXN0ZXJVcGRhdGVEQi5yZXF1ZXN0ZXIub25sb2FkID0gb25VcGRhdGVEQlN1Y2Nlc3M7XHJcblxyXG4gICAgYnRuVXBkYXRlREIudG9nZ2xlQ2xhc3MoXCJBbmltVXBkYXRlREJcIik7XHJcbiAgICAkKFwiI3ZlaWxcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgJChcIiNjb25zb2xlQ29udGFpbmVyXCIpLnRvZ2dsZUNsYXNzKFwic2NhbGUxXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblVwZGF0ZURCU3VjY2VzcygpXHJcbntcclxuICAgIGNvbnNvbGUubG9nKFwiVXBkYXRlREIgZG9uZVwiKTtcclxuICAgICQoXCIjdmVpbFwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICQoXCIjY29uc29sZUNvbnRhaW5lclwiKS50b2dnbGVDbGFzcyhcInNjYWxlMVwiKTtcclxuICAgIGJ0blVwZGF0ZURCLnRleHQoXCJEQiBpcyB1cCB0byBkYXRlXCIpO1xyXG4gICAgYnRuVXBkYXRlREIucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgYnRuVXBkYXRlREIudG9nZ2xlQ2xhc3MoXCJBbmltVXBkYXRlREJcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbnZlcnRTZWNvbmRzVG9UaW1lKHNlY29uZHMgOiBudW1iZXIpXHJcbntcclxuICAgIGlmIChzZWNvbmRzID09PSAwKVxyXG4gICAgICAgIHJldHVybiBcIi0tOi0tXCI7XHJcblxyXG4gICAgbGV0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XHJcbiAgICB2YXIgc2VjcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAtIG1pbnV0ZXMgKiA2MCk7XHJcbiAgICBsZXQgc2Vjc1MgPSBzZWNzIDwgMTAgPyBgMCR7c2Vjc31gIDogc2VjcztcclxuICAgIHJldHVybiBtaW51dGVzICsgXCI6XCIgKyBzZWNzUztcclxufVxyXG5cclxuZnVuY3Rpb24gb25CdG5VcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGFDbGljaygpXHJcbntcclxuICAgIHZhciByZXF1ZXN0ZXJVcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGEgPSBuZXcgUmVxdWVzdGVyKFwiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMS9NYWluL1VwZGF0ZVN0YXRpY0NoYW1waW9uRGF0YVwiKTtcclxuICAgIHJlcXVlc3RlclVwZGF0ZVN0YXRpY0NoYW1waW9uRGF0YS5zZW5kKCk7XHJcbiAgICByZXF1ZXN0ZXJVcGRhdGVTdGF0aWNDaGFtcGlvbkRhdGEucmVxdWVzdGVyLm9ubG9hZCA9IG9uVXBkYXRlU3RhdGljQ2hhbXBpb25EYXRhU3VjY2VzcztcclxuICAgIGJ0blVwZGF0ZURCLnRvZ2dsZUNsYXNzKFwiQW5pbVVwZGF0ZURCXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblVwZGF0ZVN0YXRpY0NoYW1waW9uRGF0YVN1Y2Nlc3MoKVxyXG57XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiVXBkYXRlIHN0YXRpYyBjaGFtcGlvbiBkYXRhIGRvbmVcIik7XHJcbiAgICBidG5VcGRhdGVEQi50ZXh0KFwiVXBkYXRlZCBzdGF0aWMgY2hhbXBpb24gZGF0YVwiKTtcclxuICAgIGJ0blVwZGF0ZURCLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIGJ0blVwZGF0ZURCLnRvZ2dsZUNsYXNzKFwiQW5pbVVwZGF0ZURCXCIpO1xyXG59IiwiZXhwb3J0IGNsYXNzIFJlcXVlc3RlclxyXG57XHJcbiAgICByZXF1ZXN0ZXI6IFhNTEh0dHBSZXF1ZXN0O1xyXG4gICAgYWRkcmVzczogc3RyaW5nO1xyXG4gICAgcGFyYW1ldGVyID0gXCJcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYWRkcmVzc1BhcmFtOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZXIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzUGFyYW07XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZXIub3BlbignR0VUJywgdGhpcy5hZGRyZXNzLmNvbmNhdCh0aGlzLnBhcmFtZXRlcikpO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZXIuc2VuZChudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBzZW5kUHV0KClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3Rlci5vcGVuKCdQVVQnLCB0aGlzLmFkZHJlc3MuY29uY2F0KHRoaXMucGFyYW1ldGVyKSk7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ZXIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgICB0aGlzLnJlcXVlc3Rlci5zZW5kKG51bGwpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceMappingURL=bundle.js.map